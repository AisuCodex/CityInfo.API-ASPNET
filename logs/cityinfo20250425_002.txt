2025-04-25 16:35:57.899 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-25 16:35:58.273 +08:00 [DBG] Hosting starting
2025-04-25 16:35:58.301 +08:00 [INF] User profile is available. Using 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-25 16:35:58.334 +08:00 [DBG] Reading data from file 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys\key-921e173d-5e38-48fb-a73b-0d9c13e74309.xml'.
2025-04-25 16:35:58.435 +08:00 [DBG] Found key {921e173d-5e38-48fb-a73b-0d9c13e74309}.
2025-04-25 16:35:58.456 +08:00 [DBG] Considering key {921e173d-5e38-48fb-a73b-0d9c13e74309} with expiration date 2025-07-23 09:56:55Z as default key.
2025-04-25 16:35:58.463 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 16:35:58.468 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-25 16:35:58.472 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 16:35:58.482 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-25 16:35:58.486 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-25 16:35:58.489 +08:00 [DBG] Using key {921e173d-5e38-48fb-a73b-0d9c13e74309} as the default key.
2025-04-25 16:35:58.492 +08:00 [DBG] Key ring with default key {921e173d-5e38-48fb-a73b-0d9c13e74309} was loaded during application startup.
2025-04-25 16:35:58.888 +08:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5212: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-04-25 16:37:41.382 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-25 16:37:41.693 +08:00 [DBG] Hosting starting
2025-04-25 16:37:41.725 +08:00 [INF] User profile is available. Using 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-25 16:37:41.765 +08:00 [DBG] Reading data from file 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys\key-921e173d-5e38-48fb-a73b-0d9c13e74309.xml'.
2025-04-25 16:37:41.796 +08:00 [DBG] Found key {921e173d-5e38-48fb-a73b-0d9c13e74309}.
2025-04-25 16:37:41.814 +08:00 [DBG] Considering key {921e173d-5e38-48fb-a73b-0d9c13e74309} with expiration date 2025-07-23 09:56:55Z as default key.
2025-04-25 16:37:41.824 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 16:37:41.843 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-25 16:37:41.849 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 16:37:41.874 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-25 16:37:41.885 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-25 16:37:41.889 +08:00 [DBG] Using key {921e173d-5e38-48fb-a73b-0d9c13e74309} as the default key.
2025-04-25 16:37:41.893 +08:00 [DBG] Key ring with default key {921e173d-5e38-48fb-a73b-0d9c13e74309} was loaded during application startup.
2025-04-25 16:37:41.996 +08:00 [INF] Now listening on: http://localhost:5212
2025-04-25 16:37:41.999 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2025-04-25 16:37:42.009 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-25 16:37:42.012 +08:00 [INF] Hosting environment: Development
2025-04-25 16:37:42.013 +08:00 [INF] Content root path: C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API
2025-04-25 16:37:42.016 +08:00 [DBG] Hosting started
2025-04-25 16:37:42.269 +08:00 [DBG] Connection id "0HNC3QHOTDM21" accepted.
2025-04-25 16:37:42.287 +08:00 [DBG] Connection id "0HNC3QHOTDM21" started.
2025-04-25 16:37:42.345 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - application/json 37
2025-04-25 16:37:42.356 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 16:37:42.386 +08:00 [DBG] POST requests are not supported
2025-04-25 16:37:42.388 +08:00 [WRN] Failed to determine the https port for redirect.
2025-04-25 16:37:42.429 +08:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2025-04-25 16:37:42.453 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2025-04-25 16:37:42.466 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:37:42.545 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-25 16:37:42.552 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:37:42.603 +08:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2025-04-25 16:37:42.606 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:37:42.609 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:37:42.612 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:37:42.614 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:37:42.615 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:37:42.622 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 16:37:42.624 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 16:37:42.639 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 16:37:42.643 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2025-04-25 16:37:42.645 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2025-04-25 16:37:42.648 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2025-04-25 16:37:42.660 +08:00 [DBG] Connection id "0HNC3QHOTDM21", Request id "0HNC3QHOTDM21:00000001": started reading request body.
2025-04-25 16:37:42.662 +08:00 [DBG] Connection id "0HNC3QHOTDM21", Request id "0HNC3QHOTDM21:00000001": done reading request body.
2025-04-25 16:37:42.823 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:37:42.824 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:37:42.826 +08:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 16:37:42.838 +08:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:37:42.917 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:37:42.924 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:37:42.925 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:37:42.927 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:37:42.929 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-04-25 16:37:42.936 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-25 16:37:42.948 +08:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 323.0454ms
2025-04-25 16:37:42.962 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:37:42.964 +08:00 [DBG] Connection id "0HNC3QHOTDM21" completed keep alive response.
2025-04-25 16:37:42.971 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - 200 null text/plain; charset=utf-8 630.127ms
2025-04-25 16:38:07.236 +08:00 [DBG] Connection id "0HNC3QHOTDM22" received FIN.
2025-04-25 16:38:07.240 +08:00 [DBG] Connection id "0HNC3QHOTDM22" accepted.
2025-04-25 16:38:07.242 +08:00 [DBG] Connection id "0HNC3QHOTDM22" started.
2025-04-25 16:38:07.242 +08:00 [DBG] Connection id "0HNC3QHOTDM23" accepted.
2025-04-25 16:38:07.246 +08:00 [DBG] Connection id "0HNC3QHOTDM22" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:38:07.246 +08:00 [DBG] Connection id "0HNC3QHOTDM23" started.
2025-04-25 16:38:07.251 +08:00 [DBG] Connection id "0HNC3QHOTDM22" disconnecting.
2025-04-25 16:38:07.255 +08:00 [DBG] Connection id "0HNC3QHOTDM22" stopped.
2025-04-25 16:38:07.258 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:38:07.275 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:38:07.279 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:38:07.280 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:38:07.284 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:38:07.467 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:38:07.471 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:38:07.486 +08:00 [DBG] Authorization was successful.
2025-04-25 16:38:07.488 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:38:07.524 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 16:38:07.530 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:38:07.535 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:38:07.539 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:38:07.547 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:38:07.558 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:38:07.564 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:38:07.824 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-25 16:38:08.085 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:38:08.088 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 16:38:08.090 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 16:38:08.094 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 16:38:08.096 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:38:08.098 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:38:08.103 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 16:38:08.105 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 16:38:08.106 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:38:08.109 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 16:38:08.111 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:38:08.113 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:38:08.117 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:38:08.119 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:38:08.121 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:38:08.124 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:38:08.125 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:38:08.127 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:38:08.128 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:38:08.131 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:38:08.136 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:38:08.138 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:38:08.141 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:38:08.142 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:38:08.144 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:38:08.147 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:38:08.148 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:38:08.153 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:38:08.155 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:38:08.939 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:38:08.973 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2025-04-25 16:38:09.276 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 16:38:09.319 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:38:09.338 +08:00 [DBG] Created DbConnection. (19ms).
2025-04-25 16:38:09.343 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:38:09.372 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:38:09.378 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:38:09.392 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-04-25 16:38:09.394 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2025-04-25 16:38:09.407 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:38:09.436 +08:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:38:09.448 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:38:09.456 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 10ms reading results.
2025-04-25 16:38:09.461 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:38:09.468 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (6ms).
2025-04-25 16:38:09.481 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2025-04-25 16:38:09.567 +08:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<City>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        City entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            City instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(City);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: City.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (City)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")]: 
                        {
                            return 
                            {
                                City instance;
                                instance = new City(dataReader.GetString(2));
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(City)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: CityInfo.API.DbContexts.CityInfoContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-25 16:38:09.598 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:38:09.601 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:38:09.602 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:38:09.603 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 16:38:09.607 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-25 16:38:09.610 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:38:09.616 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:38:09.642 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:38:09.663 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:38:09.667 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:38:09.668 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:38:09.669 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:38:09.717 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:38:09.721 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:38:09.722 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:38:09.725 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:38:09.727 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:38:09.729 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:38:09.731 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 111ms reading results.
2025-04-25 16:38:09.741 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:38:09.744 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (3ms).
2025-04-25 16:38:09.851 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:38:09.856 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:38:09.859 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:38:09.860 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:38:09.862 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 16:38:09.868 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 16:38:10.010 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 2446.3912ms
2025-04-25 16:38:10.190 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:38:10.195 +08:00 [DBG] Connection id "0HNC3QHOTDM23" completed keep alive response.
2025-04-25 16:38:10.207 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:38:10.248 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:38:10.308 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (59ms).
2025-04-25 16:38:10.326 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 3067.6111ms
2025-04-25 16:39:22.994 +08:00 [DBG] Connection id "0HNC3QHOTDM21" received FIN.
2025-04-25 16:39:22.998 +08:00 [DBG] Connection id "0HNC3QHOTDM21" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:39:23.002 +08:00 [DBG] Connection id "0HNC3QHOTDM21" disconnecting.
2025-04-25 16:39:23.007 +08:00 [DBG] Connection id "0HNC3QHOTDM21" stopped.
2025-04-25 16:39:38.758 +08:00 [DBG] Connection id "0HNC3QHOTDM24" received FIN.
2025-04-25 16:39:38.765 +08:00 [DBG] Connection id "0HNC3QHOTDM24" accepted.
2025-04-25 16:39:38.766 +08:00 [DBG] Connection id "0HNC3QHOTDM24" started.
2025-04-25 16:39:38.766 +08:00 [DBG] Connection id "0HNC3QHOTDM25" accepted.
2025-04-25 16:39:38.768 +08:00 [DBG] Connection id "0HNC3QHOTDM24" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:39:38.769 +08:00 [DBG] Connection id "0HNC3QHOTDM25" started.
2025-04-25 16:39:38.770 +08:00 [DBG] Connection id "0HNC3QHOTDM24" disconnecting.
2025-04-25 16:39:38.771 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:39:38.772 +08:00 [DBG] Connection id "0HNC3QHOTDM24" stopped.
2025-04-25 16:39:38.776 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:39:38.778 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:39:38.780 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:39:38.781 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:39:38.787 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:39:38.787 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:39:38.790 +08:00 [DBG] Authorization was successful.
2025-04-25 16:39:38.790 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:39:38.791 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 16:39:38.793 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:39:38.795 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:39:38.797 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:39:38.798 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:39:38.800 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:39:38.802 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:39:38.804 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:39:38.805 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 16:39:38.806 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 16:39:38.808 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 16:39:38.809 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:39:38.810 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:39:38.812 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 16:39:38.813 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 16:39:38.815 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:39:38.816 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 16:39:38.818 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:39:38.819 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:39:38.820 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:39:38.821 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:39:38.822 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:39:38.823 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:39:38.824 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:39:38.825 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:39:38.826 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:39:38.829 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:39:38.831 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:39:38.832 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:39:38.833 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:39:38.835 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:39:38.836 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:39:38.837 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:39:38.838 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:39:38.839 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:39:38.840 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:39:38.862 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:39:38.869 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:39:38.870 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 16:39:38.872 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:39:38.873 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:39:38.874 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:39:38.874 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 16:39:38.875 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:39:38.876 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:39:38.882 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:39:38.884 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:39:38.885 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 16:39:38.888 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:39:38.889 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:39:38.893 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:39:38.898 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:39:38.899 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:39:38.900 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 16:39:38.902 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 16:39:38.904 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:39:38.905 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:39:38.907 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:39:38.908 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:39:38.909 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:39:38.913 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:39:38.915 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:39:38.916 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:39:38.917 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:39:38.920 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:39:38.922 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:39:38.924 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:39:38.926 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:39:38.929 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 22ms reading results.
2025-04-25 16:39:38.931 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:39:38.932 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:39:38.936 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:39:38.938 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:39:38.938 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:39:38.939 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:39:38.940 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 16:39:38.941 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 16:39:38.945 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 143.0873ms
2025-04-25 16:39:38.948 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:39:38.951 +08:00 [DBG] Connection id "0HNC3QHOTDM25" completed keep alive response.
2025-04-25 16:39:38.955 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:39:38.962 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:39:38.964 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 16:39:38.968 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 195.9691ms
2025-04-25 16:40:21.451 +08:00 [DBG] Connection id "0HNC3QHOTDM23" disconnecting.
2025-04-25 16:40:21.452 +08:00 [DBG] Connection id "0HNC3QHOTDM23" stopped.
2025-04-25 16:40:21.454 +08:00 [DBG] Connection id "0HNC3QHOTDM23" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:40:53.586 +08:00 [DBG] Connection id "0HNC3QHOTDM26" accepted.
2025-04-25 16:40:53.587 +08:00 [DBG] Connection id "0HNC3QHOTDM26" received FIN.
2025-04-25 16:40:53.589 +08:00 [DBG] Connection id "0HNC3QHOTDM26" started.
2025-04-25 16:40:53.594 +08:00 [DBG] Connection id "0HNC3QHOTDM26" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:40:53.589 +08:00 [DBG] Connection id "0HNC3QHOTDM27" accepted.
2025-04-25 16:40:53.597 +08:00 [DBG] Connection id "0HNC3QHOTDM26" disconnecting.
2025-04-25 16:40:53.599 +08:00 [DBG] Connection id "0HNC3QHOTDM27" started.
2025-04-25 16:40:53.601 +08:00 [DBG] Connection id "0HNC3QHOTDM26" stopped.
2025-04-25 16:40:53.603 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - application/json 111
2025-04-25 16:40:53.611 +08:00 [DBG] POST requests are not supported
2025-04-25 16:40:53.612 +08:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2025-04-25 16:40:53.614 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2025-04-25 16:40:53.617 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:40:53.618 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-25 16:40:53.620 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:40:53.621 +08:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2025-04-25 16:40:53.627 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:40:53.629 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:40:53.630 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:40:53.635 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:40:53.636 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:40:53.637 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 16:40:53.639 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 16:40:53.643 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 16:40:53.646 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2025-04-25 16:40:53.650 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2025-04-25 16:40:53.652 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2025-04-25 16:40:53.653 +08:00 [DBG] Connection id "0HNC3QHOTDM27", Request id "0HNC3QHOTDM27:00000001": started reading request body.
2025-04-25 16:40:53.654 +08:00 [DBG] Connection id "0HNC3QHOTDM27", Request id "0HNC3QHOTDM27:00000001": done reading request body.
2025-04-25 16:40:53.661 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:40:53.662 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:40:53.669 +08:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 16:40:53.671 +08:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:40:53.678 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:40:53.682 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:40:53.683 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:40:53.684 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:40:53.684 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-04-25 16:40:53.685 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-25 16:40:53.688 +08:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 50.1267ms
2025-04-25 16:40:53.689 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:40:53.694 +08:00 [DBG] Connection id "0HNC3QHOTDM27" completed keep alive response.
2025-04-25 16:40:53.696 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - 200 null text/plain; charset=utf-8 92.4527ms
2025-04-25 16:41:19.693 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 16:41:19.698 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:41:19.700 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 16:41:19.703 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 16:41:19.711 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:41:19.715 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:41:19.718 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:41:19.728 +08:00 [DBG] Authorization was successful.
2025-04-25 16:41:19.731 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:41:19.753 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 16:41:19.763 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:41:19.766 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:41:19.771 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:41:19.780 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:41:19.783 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 16:41:19.787 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:41:19.820 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:41:19.826 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:41:19.830 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 16:41:19.836 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:41:19.844 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:41:19.848 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:41:19.852 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:41:20.041 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:41:20.055 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2025-04-25 16:41:20.100 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1)), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 16:41:20.119 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:41:20.119 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 16:41:20.121 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:41:20.125 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:41:20.128 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:41:20.129 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 16:41:20.130 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:41:20.131 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:41:20.136 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:41:20.143 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:41:20.145 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 7ms reading results.
2025-04-25 16:41:20.146 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:41:20.148 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:41:20.151 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2025-04-25 16:41:20.160 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 16:41:20.166 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:41:20.169 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:41:20.171 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:41:20.177 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-04-25 16:41:20.179 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-04-25 16:41:20.180 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 16:41:20.182 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 16:41:20.185 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:41:20.187 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2025-04-25 16:41:20.196 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:41:20.198 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:41:20.202 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2025-04-25 16:41:20.219 +08:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<PointOfInterest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        PointOfInterest entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            PointOfInterest instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(PointOfInterest);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: PointOfInterest.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (PointOfInterest)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: PointOfInterest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: PointOfInterest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest")]: 
                        {
                            return 
                            {
                                PointOfInterest instance;
                                instance = new PointOfInterest(dataReader.GetString(3));
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CityId>k__BackingField = dataReader.GetInt32(1);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: PointOfInterest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(PointOfInterest)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: CityInfo.API.DbContexts.CityInfoContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-25 16:41:20.231 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:41:20.232 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:41:20.233 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:41:20.234 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 16:41:20.236 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 16:41:20.237 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 16:41:20.243 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 16:41:20.249 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:41:20.262 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:41:20.263 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:41:20.265 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 20ms reading results.
2025-04-25 16:41:20.266 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:41:20.268 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:41:20.280 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:41:20.282 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:41:20.285 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 16:41:20.286 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 16:41:20.288 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 16:41:20.297 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 509.731ms
2025-04-25 16:41:20.300 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:41:20.302 +08:00 [DBG] Connection id "0HNC3QHOTDM27" completed keep alive response.
2025-04-25 16:41:20.303 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:41:20.308 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:41:20.310 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 16:41:20.312 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 618.8178ms
2025-04-25 16:41:29.838 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 16:41:29.841 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:41:29.843 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:41:29.845 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:41:29.849 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:41:29.854 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:41:29.857 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:41:29.860 +08:00 [DBG] Authorization was successful.
2025-04-25 16:41:29.861 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:41:29.862 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 16:41:29.865 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:41:29.868 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:41:29.870 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:41:29.876 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:41:29.878 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 16:41:29.881 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:41:29.883 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:41:29.885 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:41:29.889 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 16:41:29.893 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:41:29.895 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:41:29.900 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:41:29.902 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:41:29.909 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:41:29.914 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:41:29.916 +08:00 [DBG] Created DbConnection. (1ms).
2025-04-25 16:41:29.917 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:41:29.919 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:41:29.922 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:41:29.924 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:41:29.926 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 16:41:29.929 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:41:29.933 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:41:29.936 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:41:29.940 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 4ms reading results.
2025-04-25 16:41:29.943 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:41:29.944 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:41:29.950 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 16:41:29.954 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 16:41:29.956 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 75.6152ms
2025-04-25 16:41:29.958 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:41:29.960 +08:00 [DBG] Connection id "0HNC3QHOTDM27" completed keep alive response.
2025-04-25 16:41:29.964 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:41:29.966 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:41:29.968 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:41:29.970 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 131.9561ms
2025-04-25 16:41:50.532 +08:00 [DBG] Connection id "0HNC3QHOTDM25" disconnecting.
2025-04-25 16:41:50.533 +08:00 [DBG] Connection id "0HNC3QHOTDM25" stopped.
2025-04-25 16:41:50.534 +08:00 [DBG] Connection id "0HNC3QHOTDM25" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:42:49.260 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-25 16:42:49.818 +08:00 [DBG] Hosting starting
2025-04-25 16:42:49.877 +08:00 [INF] User profile is available. Using 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-25 16:42:49.920 +08:00 [DBG] Reading data from file 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys\key-921e173d-5e38-48fb-a73b-0d9c13e74309.xml'.
2025-04-25 16:42:49.962 +08:00 [DBG] Found key {921e173d-5e38-48fb-a73b-0d9c13e74309}.
2025-04-25 16:42:49.981 +08:00 [DBG] Considering key {921e173d-5e38-48fb-a73b-0d9c13e74309} with expiration date 2025-07-23 09:56:55Z as default key.
2025-04-25 16:42:49.994 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 16:42:49.999 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-25 16:42:50.010 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 16:42:50.021 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-25 16:42:50.023 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-25 16:42:50.034 +08:00 [DBG] Using key {921e173d-5e38-48fb-a73b-0d9c13e74309} as the default key.
2025-04-25 16:42:50.040 +08:00 [DBG] Key ring with default key {921e173d-5e38-48fb-a73b-0d9c13e74309} was loaded during application startup.
2025-04-25 16:42:50.160 +08:00 [INF] Now listening on: http://localhost:5212
2025-04-25 16:42:50.161 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2025-04-25 16:42:50.162 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-25 16:42:50.163 +08:00 [INF] Hosting environment: Development
2025-04-25 16:42:50.164 +08:00 [INF] Content root path: C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API
2025-04-25 16:42:50.165 +08:00 [DBG] Hosting started
2025-04-25 16:42:56.422 +08:00 [DBG] Connection id "0HNC3QKMHDF1Q" received FIN.
2025-04-25 16:42:56.429 +08:00 [DBG] Connection id "0HNC3QKMHDF1Q" accepted.
2025-04-25 16:42:56.431 +08:00 [DBG] Connection id "0HNC3QKMHDF1Q" started.
2025-04-25 16:42:56.440 +08:00 [DBG] Connection id "0HNC3QKMHDF1R" accepted.
2025-04-25 16:42:56.443 +08:00 [DBG] Connection id "0HNC3QKMHDF1R" started.
2025-04-25 16:42:56.444 +08:00 [DBG] Connection id "0HNC3QKMHDF1Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:42:56.465 +08:00 [DBG] Connection id "0HNC3QKMHDF1Q" disconnecting.
2025-04-25 16:42:56.482 +08:00 [DBG] Connection id "0HNC3QKMHDF1Q" stopped.
2025-04-25 16:42:56.512 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:42:56.519 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 16:42:56.555 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:42:56.559 +08:00 [WRN] Failed to determine the https port for redirect.
2025-04-25 16:42:56.598 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:42:56.609 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:42:56.611 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:42:56.701 +08:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-04-25 16:42:56.730 +08:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-04-25 16:42:56.737 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 16:42:56.742 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 16:42:56.754 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 16:42:56.760 +08:00 [DBG] Connection id "0HNC3QKMHDF1R" completed keep alive response.
2025-04-25 16:42:56.765 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 401 0 null 254.3497ms
2025-04-25 16:43:43.001 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:43:43.274 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:44:16.820 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:44:17.078 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:44:18.338 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:44:18.670 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:44:21.986 +08:00 [DBG] Connection id "0HNC3QKMHDF1S" received FIN.
2025-04-25 16:44:21.990 +08:00 [DBG] Connection id "0HNC3QKMHDF1S" accepted.
2025-04-25 16:44:21.994 +08:00 [DBG] Connection id "0HNC3QKMHDF1S" started.
2025-04-25 16:44:21.994 +08:00 [DBG] Connection id "0HNC3QKMHDF1T" accepted.
2025-04-25 16:44:21.999 +08:00 [DBG] Connection id "0HNC3QKMHDF1S" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:44:22.003 +08:00 [DBG] Connection id "0HNC3QKMHDF1T" started.
2025-04-25 16:44:22.005 +08:00 [DBG] Connection id "0HNC3QKMHDF1S" disconnecting.
2025-04-25 16:44:22.007 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:44:22.009 +08:00 [DBG] Connection id "0HNC3QKMHDF1S" stopped.
2025-04-25 16:44:22.013 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 16:44:22.020 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:44:22.023 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:44:22.025 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:44:22.027 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:44:22.038 +08:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-04-25 16:44:22.042 +08:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-04-25 16:44:22.047 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 16:44:22.050 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 16:44:22.053 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 16:44:22.056 +08:00 [DBG] Connection id "0HNC3QKMHDF1T" completed keep alive response.
2025-04-25 16:44:22.066 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 401 0 null 58.7026ms
2025-04-25 16:44:35.635 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:44:35.899 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:44:48.286 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:44:48.545 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:44:50.691 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:44:50.955 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:44:56.101 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:44:56.103 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 16:44:56.105 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:44:56.106 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:44:56.108 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:44:56.111 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:44:56.257 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:44:56.260 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:44:56.265 +08:00 [DBG] Authorization was successful.
2025-04-25 16:44:56.268 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:44:56.329 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 16:44:56.333 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:44:56.335 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:44:56.337 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:44:56.339 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:44:56.341 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:44:56.349 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:44:56.492 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-25 16:44:56.665 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:44:56.671 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 16:44:56.673 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 16:44:56.677 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 16:44:56.680 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:44:56.682 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:44:56.684 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 16:44:56.687 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 16:44:56.689 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:44:56.690 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 16:44:56.692 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:44:56.697 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:44:56.698 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:44:56.699 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:44:56.700 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:44:56.701 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:44:56.702 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:44:56.703 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:44:56.704 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:44:56.705 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:44:56.706 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:44:56.707 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:44:56.708 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:44:56.712 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:44:56.714 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:44:56.715 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:44:56.716 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:44:56.717 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:44:56.718 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:44:57.474 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:44:57.521 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2025-04-25 16:44:57.864 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 16:44:57.903 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:44:57.922 +08:00 [DBG] Created DbConnection. (20ms).
2025-04-25 16:44:57.929 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:44:57.970 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:44:57.981 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:44:57.990 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-04-25 16:44:57.998 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2025-04-25 16:44:58.008 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:44:58.055 +08:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:44:58.072 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:44:58.088 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 20ms reading results.
2025-04-25 16:44:58.101 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:44:58.107 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (6ms).
2025-04-25 16:44:58.137 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2025-04-25 16:44:58.253 +08:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<City>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        City entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            City instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(City);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: City.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (City)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")]: 
                        {
                            return 
                            {
                                City instance;
                                instance = new City(dataReader.GetString(2));
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(City)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: CityInfo.API.DbContexts.CityInfoContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-25 16:44:58.284 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:44:58.290 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:44:58.296 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:44:58.299 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-04-25 16:44:58.304 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-04-25 16:44:58.318 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:44:58.324 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:44:58.367 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:44:58.397 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:44:58.399 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:44:58.400 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:44:58.401 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:44:58.402 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:44:58.403 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:44:58.405 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:44:58.406 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:44:58.407 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:44:58.409 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:44:58.418 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 84ms reading results.
2025-04-25 16:44:58.419 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:44:58.420 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:44:58.529 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:44:58.533 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:44:58.534 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:44:58.535 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:44:58.538 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 16:44:58.540 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 16:44:58.731 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 2369.7938ms
2025-04-25 16:44:58.749 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:44:58.798 +08:00 [DBG] Connection id "0HNC3QKMHDF1T" completed keep alive response.
2025-04-25 16:44:58.807 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:44:58.819 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:44:58.823 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (4ms).
2025-04-25 16:44:58.827 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 2726.3096ms
2025-04-25 16:45:08.049 +08:00 [DBG] Connection id "0HNC3QKMHDF1R" disconnecting.
2025-04-25 16:45:08.056 +08:00 [DBG] Connection id "0HNC3QKMHDF1R" stopped.
2025-04-25 16:45:08.059 +08:00 [DBG] Connection id "0HNC3QKMHDF1R" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:46:09.726 +08:00 [DBG] Connection id "0HNC3QKMHDF1U" received FIN.
2025-04-25 16:46:09.730 +08:00 [DBG] Connection id "0HNC3QKMHDF1U" accepted.
2025-04-25 16:46:09.731 +08:00 [DBG] Connection id "0HNC3QKMHDF1U" started.
2025-04-25 16:46:09.732 +08:00 [DBG] Connection id "0HNC3QKMHDF1V" accepted.
2025-04-25 16:46:09.733 +08:00 [DBG] Connection id "0HNC3QKMHDF1U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:46:09.736 +08:00 [DBG] Connection id "0HNC3QKMHDF1V" started.
2025-04-25 16:46:09.743 +08:00 [DBG] Connection id "0HNC3QKMHDF1U" disconnecting.
2025-04-25 16:46:09.746 +08:00 [DBG] Connection id "0HNC3QKMHDF1U" stopped.
2025-04-25 16:46:09.745 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 16:46:09.752 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:46:09.754 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:46:09.758 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:46:09.762 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:46:09.764 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:46:09.765 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:46:09.767 +08:00 [DBG] Authorization was successful.
2025-04-25 16:46:09.768 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:46:09.779 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 16:46:09.781 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:46:09.782 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:46:09.784 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:46:09.785 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:46:09.787 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 16:46:09.791 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:46:09.796 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:46:09.798 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:46:09.801 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 16:46:09.804 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:46:09.809 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:46:09.811 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:46:09.812 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:46:09.846 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:46:09.854 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2025-04-25 16:46:09.884 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1)), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 16:46:09.901 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:46:09.901 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 16:46:09.902 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:46:09.903 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:09.904 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:46:09.910 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-04-25 16:46:09.911 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-04-25 16:46:09.913 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:46:09.918 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:46:09.920 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:09.925 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 5ms reading results.
2025-04-25 16:46:09.927 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:09.928 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:46:09.933 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 16:46:09.935 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 16:46:09.936 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 144.7887ms
2025-04-25 16:46:09.943 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:46:09.946 +08:00 [DBG] Connection id "0HNC3QKMHDF1V" completed keep alive response.
2025-04-25 16:46:09.948 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:46:09.950 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:46:09.952 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:46:09.954 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 209.0284ms
2025-04-25 16:46:16.183 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 16:46:16.187 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:46:16.191 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 16:46:16.194 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 16:46:16.195 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:46:16.197 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:46:16.198 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:46:16.199 +08:00 [DBG] Authorization was successful.
2025-04-25 16:46:16.201 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:46:16.203 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 16:46:16.211 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:46:16.212 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:46:16.214 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:46:16.215 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:46:16.218 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 16:46:16.219 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:46:16.228 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:46:16.230 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:46:16.231 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 16:46:16.233 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:46:16.234 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:46:16.235 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:46:16.236 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:46:16.336 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:46:16.348 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:46:16.349 +08:00 [DBG] Created DbConnection. (1ms).
2025-04-25 16:46:16.350 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:46:16.351 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:16.352 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:46:16.353 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 16:46:16.354 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:46:16.359 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:46:16.362 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:46:16.365 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:16.366 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 16:46:16.368 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:16.369 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:46:16.375 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2025-04-25 16:46:16.385 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 16:46:16.396 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:46:16.398 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:16.401 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:46:16.403 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-25 16:46:16.404 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 16:46:16.410 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 16:46:16.413 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 16:46:16.415 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:16.417 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 16:46:16.420 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:16.425 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (4ms).
2025-04-25 16:46:16.431 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2025-04-25 16:46:16.449 +08:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<PointOfInterest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        PointOfInterest entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            PointOfInterest instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(PointOfInterest);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: PointOfInterest.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (PointOfInterest)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: PointOfInterest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: PointOfInterest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest")]: 
                        {
                            return 
                            {
                                PointOfInterest instance;
                                instance = new PointOfInterest(dataReader.GetString(3));
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CityId>k__BackingField = dataReader.GetInt32(1);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: PointOfInterest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(PointOfInterest)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: CityInfo.API.DbContexts.CityInfoContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-25 16:46:16.461 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:46:16.462 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:16.468 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:46:16.470 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:46:16.474 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-04-25 16:46:16.478 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 16:46:16.483 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 16:46:16.495 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:46:16.510 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:46:16.512 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:16.515 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 27ms reading results.
2025-04-25 16:46:16.517 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:16.519 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:46:16.535 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:46:16.543 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:46:16.547 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 16:46:16.550 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 16:46:16.552 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 16:46:16.566 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 347.0181ms
2025-04-25 16:46:16.578 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:46:16.581 +08:00 [DBG] Connection id "0HNC3QKMHDF1V" completed keep alive response.
2025-04-25 16:46:16.585 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:46:16.587 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:46:16.595 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (8ms).
2025-04-25 16:46:16.598 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 414.0803ms
2025-04-25 16:46:23.333 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:46:23.337 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:46:23.343 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:46:23.344 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:46:23.346 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:46:23.352 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:46:23.353 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:46:23.359 +08:00 [DBG] Authorization was successful.
2025-04-25 16:46:23.361 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:46:23.363 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 16:46:23.367 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:46:23.369 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:46:23.370 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:46:23.378 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:46:23.380 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:46:23.382 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:46:23.384 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:46:23.386 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 16:46:23.387 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 16:46:23.396 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 16:46:23.398 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:46:23.399 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:46:23.401 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 16:46:23.402 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 16:46:23.403 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:46:23.407 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 16:46:23.411 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:46:23.413 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:46:23.419 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:46:23.428 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:46:23.430 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:46:23.435 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:46:23.437 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:46:23.447 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:46:23.450 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:46:23.452 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:46:23.453 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:46:23.461 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:46:23.462 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:46:23.464 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:46:23.466 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:46:23.468 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:46:23.469 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:46:23.470 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:46:23.476 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:46:23.479 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:46:23.483 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:46:23.484 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 16:46:23.485 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:46:23.486 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:23.487 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:46:23.493 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-04-25 16:46:23.494 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-04-25 16:46:23.496 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:46:23.500 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:46:23.502 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:23.503 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 16:46:23.509 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:23.511 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:46:23.514 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:46:23.516 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:23.517 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:46:23.518 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 16:46:23.519 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 16:46:23.525 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:46:23.528 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:46:23.530 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:46:23.532 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:46:23.534 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:46:23.535 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:46:23.537 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:46:23.544 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:46:23.547 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:46:23.548 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:46:23.550 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:46:23.553 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:46:23.559 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:23.562 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 31ms reading results.
2025-04-25 16:46:23.564 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:46:23.566 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:46:23.568 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:46:23.570 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:46:23.573 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:46:23.576 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:46:23.576 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 16:46:23.577 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 16:46:23.579 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 197.412ms
2025-04-25 16:46:23.581 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:46:23.582 +08:00 [DBG] Connection id "0HNC3QKMHDF1V" completed keep alive response.
2025-04-25 16:46:23.583 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:46:23.584 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:46:23.585 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:46:23.586 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 252.9494ms
2025-04-25 16:46:45.955 +08:00 [DBG] Connection id "0HNC3QKMHDF20" accepted.
2025-04-25 16:46:45.960 +08:00 [DBG] Connection id "0HNC3QKMHDF21" accepted.
2025-04-25 16:46:45.962 +08:00 [DBG] Connection id "0HNC3QKMHDF20" started.
2025-04-25 16:46:45.964 +08:00 [DBG] Connection id "0HNC3QKMHDF21" started.
2025-04-25 16:46:46.206 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/_framework/aspnetcore-browser-refresh.js - null null
2025-04-25 16:46:46.278 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:46:46.279 +08:00 [DBG] No candidates found for the request path '/_framework/aspnetcore-browser-refresh.js'
2025-04-25 16:46:46.281 +08:00 [DBG] Request did not match any endpoints
2025-04-25 16:46:46.284 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-25 16:46:46.286 +08:00 [DBG] Connection id "0HNC3QKMHDF21" completed keep alive response.
2025-04-25 16:46:46.293 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/_framework/aspnetcore-browser-refresh.js - 404 0 null 86.8611ms
2025-04-25 16:46:46.298 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5212/_framework/aspnetcore-browser-refresh.js, Response status code: 404
2025-04-25 16:46:48.414 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/swagger/v1/swagger.json - null null
2025-04-25 16:46:48.690 +08:00 [DBG] Connection id "0HNC3QKMHDF21" completed keep alive response.
2025-04-25 16:46:48.691 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 277.4471ms
2025-04-25 16:46:49.452 +08:00 [DBG] Connection id "0HNC3QKMHDF20" received FIN.
2025-04-25 16:46:49.454 +08:00 [DBG] Connection id "0HNC3QKMHDF21" received FIN.
2025-04-25 16:46:49.462 +08:00 [DBG] Connection id "0HNC3QKMHDF20" disconnecting.
2025-04-25 16:46:49.464 +08:00 [DBG] Connection id "0HNC3QKMHDF21" disconnecting.
2025-04-25 16:46:49.475 +08:00 [DBG] Connection id "0HNC3QKMHDF20" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:46:49.478 +08:00 [DBG] Connection id "0HNC3QKMHDF21" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:46:49.483 +08:00 [DBG] Connection id "0HNC3QKMHDF20" stopped.
2025-04-25 16:46:49.491 +08:00 [DBG] Connection id "0HNC3QKMHDF21" stopped.
2025-04-25 16:47:09.201 +08:00 [DBG] Connection id "0HNC3QKMHDF1T" disconnecting.
2025-04-25 16:47:09.204 +08:00 [DBG] Connection id "0HNC3QKMHDF1T" stopped.
2025-04-25 16:47:09.206 +08:00 [DBG] Connection id "0HNC3QKMHDF1T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:47:23.370 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:47:23.628 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:47:24.634 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:47:25.781 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:47:26.482 +08:00 [DBG] Connection id "0HNC3QKMHDF22" accepted.
2025-04-25 16:47:26.483 +08:00 [DBG] Connection id "0HNC3QKMHDF22" received FIN.
2025-04-25 16:47:26.486 +08:00 [DBG] Connection id "0HNC3QKMHDF23" accepted.
2025-04-25 16:47:26.486 +08:00 [DBG] Connection id "0HNC3QKMHDF22" started.
2025-04-25 16:47:26.490 +08:00 [DBG] Connection id "0HNC3QKMHDF22" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:47:26.491 +08:00 [DBG] Connection id "0HNC3QKMHDF23" started.
2025-04-25 16:47:26.493 +08:00 [DBG] Connection id "0HNC3QKMHDF22" disconnecting.
2025-04-25 16:47:26.494 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:47:26.497 +08:00 [DBG] Connection id "0HNC3QKMHDF22" stopped.
2025-04-25 16:47:26.499 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 16:47:26.502 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:47:26.503 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:47:26.504 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:47:26.506 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:47:26.508 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:47:26.509 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:47:26.510 +08:00 [DBG] Authorization was successful.
2025-04-25 16:47:26.511 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:47:26.512 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 16:47:26.514 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:47:26.515 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:47:26.516 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:47:26.521 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:47:26.524 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:47:26.528 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:47:26.530 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:47:26.531 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 16:47:26.532 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 16:47:26.534 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 16:47:26.540 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:47:26.542 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:47:26.543 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 16:47:26.545 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 16:47:26.548 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:47:26.550 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 16:47:26.553 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:47:26.555 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:47:26.556 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:47:26.558 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:47:26.559 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:47:26.560 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:47:26.562 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:47:26.564 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:47:26.566 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:47:26.569 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:47:26.574 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:47:26.575 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:47:26.577 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:47:26.580 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:47:26.587 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:47:26.590 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:47:26.592 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:47:26.593 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:47:26.594 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:47:26.596 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:47:26.598 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:47:26.599 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 16:47:26.599 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:47:26.608 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:26.610 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:47:26.611 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:47:26.612 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 16:47:26.613 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:47:26.615 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:47:26.617 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:26.620 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 3ms reading results.
2025-04-25 16:47:26.623 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:26.625 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 16:47:26.628 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:47:26.630 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:26.632 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:47:26.633 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 16:47:26.634 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:47:26.639 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:47:26.642 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:47:26.643 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:26.645 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:26.646 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:26.647 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:26.648 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:26.649 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:26.650 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:26.656 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:26.659 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:26.661 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:26.663 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:26.664 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 20ms reading results.
2025-04-25 16:47:26.666 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:26.667 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:47:26.673 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:47:26.677 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:47:26.678 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:47:26.678 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:47:26.679 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 16:47:26.680 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 16:47:26.681 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 153.3584ms
2025-04-25 16:47:26.682 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:47:26.688 +08:00 [DBG] Connection id "0HNC3QKMHDF23" completed keep alive response.
2025-04-25 16:47:26.691 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:47:26.692 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:47:26.693 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:47:26.695 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 200.3228ms
2025-04-25 16:47:28.227 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:47:28.231 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:47:28.232 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:47:28.233 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:47:28.241 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:47:28.244 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:47:28.245 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:47:28.257 +08:00 [DBG] Authorization was successful.
2025-04-25 16:47:28.264 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:47:28.266 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 16:47:28.274 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:47:28.276 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:47:28.278 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:47:28.281 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:47:28.283 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:47:28.290 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:47:28.292 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:47:28.295 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 16:47:28.297 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 16:47:28.299 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 16:47:28.307 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:47:28.309 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:47:28.312 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 16:47:28.313 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 16:47:28.315 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:47:28.317 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 16:47:28.322 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:47:28.325 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:47:28.328 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:47:28.329 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:47:28.331 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:47:28.333 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:47:28.340 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:47:28.344 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:47:28.347 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:47:28.349 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:47:28.357 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:47:28.363 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:47:28.365 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:47:28.373 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:47:28.378 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:47:28.380 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:47:28.382 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:47:28.383 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:47:28.390 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:47:28.393 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:47:28.397 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:47:28.398 +08:00 [DBG] Created DbConnection. (1ms).
2025-04-25 16:47:28.399 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:47:28.404 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:28.409 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:47:28.411 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:47:28.413 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 16:47:28.416 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:47:28.425 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:47:28.429 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:28.432 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2025-04-25 16:47:28.440 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:28.444 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (3ms).
2025-04-25 16:47:28.448 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:47:28.458 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:28.461 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:47:28.463 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-25 16:47:28.476 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-04-25 16:47:28.479 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:47:28.490 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:47:28.494 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:28.498 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:28.500 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:28.507 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:28.510 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:28.522 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:28.530 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:28.532 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:28.537 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:28.542 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:28.545 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:28.547 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 53ms reading results.
2025-04-25 16:47:28.550 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:28.558 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (8ms).
2025-04-25 16:47:28.562 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:47:28.566 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:47:28.573 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:47:28.574 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:47:28.577 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 16:47:28.581 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 16:47:28.587 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 297.3873ms
2025-04-25 16:47:28.596 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:47:28.599 +08:00 [DBG] Connection id "0HNC3QKMHDF23" completed keep alive response.
2025-04-25 16:47:28.607 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:47:28.611 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:47:28.615 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (4ms).
2025-04-25 16:47:28.620 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 392.3932ms
2025-04-25 16:47:32.052 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:47:32.321 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:47:32.736 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:47:33.000 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:47:33.273 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 16:47:36.397 +08:00 [INF] Application is shutting down...
2025-04-25 16:47:36.411 +08:00 [DBG] Hosting stopping
2025-04-25 16:47:36.444 +08:00 [DBG] Connection id "0HNC3QKMHDF1V" disconnecting.
2025-04-25 16:47:36.444 +08:00 [DBG] Connection id "0HNC3QKMHDF23" disconnecting.
2025-04-25 16:47:36.456 +08:00 [DBG] Connection id "0HNC3QKMHDF1V" stopped.
2025-04-25 16:47:36.458 +08:00 [DBG] Connection id "0HNC3QKMHDF23" stopped.
2025-04-25 16:47:36.459 +08:00 [DBG] Connection id "0HNC3QKMHDF1V" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:47:36.462 +08:00 [DBG] Connection id "0HNC3QKMHDF23" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:47:36.490 +08:00 [DBG] Hosting stopped
2025-04-25 16:47:44.298 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-25 16:47:44.463 +08:00 [DBG] Hosting starting
2025-04-25 16:47:44.488 +08:00 [INF] User profile is available. Using 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-25 16:47:44.502 +08:00 [DBG] Reading data from file 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys\key-921e173d-5e38-48fb-a73b-0d9c13e74309.xml'.
2025-04-25 16:47:44.541 +08:00 [DBG] Found key {921e173d-5e38-48fb-a73b-0d9c13e74309}.
2025-04-25 16:47:44.561 +08:00 [DBG] Considering key {921e173d-5e38-48fb-a73b-0d9c13e74309} with expiration date 2025-07-23 09:56:55Z as default key.
2025-04-25 16:47:44.566 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 16:47:44.573 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-25 16:47:44.576 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 16:47:44.582 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-25 16:47:44.589 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-25 16:47:44.592 +08:00 [DBG] Using key {921e173d-5e38-48fb-a73b-0d9c13e74309} as the default key.
2025-04-25 16:47:44.596 +08:00 [DBG] Key ring with default key {921e173d-5e38-48fb-a73b-0d9c13e74309} was loaded during application startup.
2025-04-25 16:47:44.708 +08:00 [INF] Now listening on: http://localhost:5212
2025-04-25 16:47:44.710 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2025-04-25 16:47:44.712 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-25 16:47:44.713 +08:00 [INF] Hosting environment: Development
2025-04-25 16:47:44.715 +08:00 [INF] Content root path: C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API
2025-04-25 16:47:44.717 +08:00 [DBG] Hosting started
2025-04-25 16:47:52.642 +08:00 [DBG] Connection id "0HNC3QNEQCJB0" received FIN.
2025-04-25 16:47:52.653 +08:00 [DBG] Connection id "0HNC3QNEQCJB0" accepted.
2025-04-25 16:47:52.656 +08:00 [DBG] Connection id "0HNC3QNEQCJB0" started.
2025-04-25 16:47:52.664 +08:00 [DBG] Connection id "0HNC3QNEQCJB1" accepted.
2025-04-25 16:47:52.670 +08:00 [DBG] Connection id "0HNC3QNEQCJB1" started.
2025-04-25 16:47:52.668 +08:00 [DBG] Connection id "0HNC3QNEQCJB0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:47:52.693 +08:00 [DBG] Connection id "0HNC3QNEQCJB0" disconnecting.
2025-04-25 16:47:52.709 +08:00 [DBG] Connection id "0HNC3QNEQCJB0" stopped.
2025-04-25 16:47:52.760 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:47:52.767 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 16:47:52.804 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:47:52.807 +08:00 [WRN] Failed to determine the https port for redirect.
2025-04-25 16:47:52.857 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:47:52.864 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:47:52.872 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:47:53.058 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:47:53.060 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:47:53.067 +08:00 [DBG] Authorization was successful.
2025-04-25 16:47:53.073 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:47:53.125 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 16:47:53.129 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:47:53.130 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:47:53.136 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:47:53.140 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:47:53.143 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:47:53.147 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:47:53.310 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-25 16:47:53.742 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:47:53.746 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 16:47:53.750 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 16:47:53.754 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 16:47:53.757 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:47:53.758 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:47:53.759 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 16:47:53.761 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 16:47:53.773 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:47:53.775 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 16:47:53.777 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:47:53.778 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:47:53.779 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:47:53.780 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:47:53.781 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:47:53.784 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:47:53.786 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:47:53.788 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:47:53.790 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:47:53.791 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:47:53.792 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:47:53.794 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:47:53.795 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:47:53.796 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:47:53.798 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:47:53.803 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:47:53.804 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:47:53.805 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:47:53.807 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:47:54.488 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:47:54.540 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2025-04-25 16:47:54.881 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 16:47:54.931 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:47:54.956 +08:00 [DBG] Created DbConnection. (17ms).
2025-04-25 16:47:54.962 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:47:54.982 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:54.992 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:47:55.002 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-04-25 16:47:55.009 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2025-04-25 16:47:55.021 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:47:55.053 +08:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:47:55.080 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:55.095 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 24ms reading results.
2025-04-25 16:47:55.102 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:55.113 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (13ms).
2025-04-25 16:47:55.139 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2025-04-25 16:47:55.274 +08:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<City>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        City entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            City instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(City);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: City.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (City)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")]: 
                        {
                            return 
                            {
                                City instance;
                                instance = new City(dataReader.GetString(2));
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(City)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: CityInfo.API.DbContexts.CityInfoContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-25 16:47:55.293 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:47:55.312 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:55.330 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:47:55.331 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:47:55.343 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-04-25 16:47:55.348 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:47:55.363 +08:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:47:55.436 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:55.491 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:55.696 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:55.748 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:55.956 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:56.013 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:56.023 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:56.027 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:56.028 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:56.031 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:47:56.037 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:56.043 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 673ms reading results.
2025-04-25 16:47:56.044 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:47:56.046 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:47:56.194 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:47:56.199 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:47:56.208 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:47:56.211 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:47:56.215 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 16:47:56.243 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 16:47:56.382 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 3231.0637ms
2025-04-25 16:47:56.391 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:47:56.392 +08:00 [DBG] Connection id "0HNC3QNEQCJB1" completed keep alive response.
2025-04-25 16:47:56.398 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:47:56.428 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:47:56.448 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (29ms).
2025-04-25 16:47:56.458 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 3701.2648ms
2025-04-25 16:49:07.167 +08:00 [DBG] Connection id "0HNC3QNEQCJB2" received FIN.
2025-04-25 16:49:07.176 +08:00 [DBG] Connection id "0HNC3QNEQCJB2" accepted.
2025-04-25 16:49:07.185 +08:00 [DBG] Connection id "0HNC3QNEQCJB3" accepted.
2025-04-25 16:49:07.185 +08:00 [DBG] Connection id "0HNC3QNEQCJB2" started.
2025-04-25 16:49:07.188 +08:00 [DBG] Connection id "0HNC3QNEQCJB3" started.
2025-04-25 16:49:07.189 +08:00 [DBG] Connection id "0HNC3QNEQCJB2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:49:07.192 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - application/json 111
2025-04-25 16:49:07.195 +08:00 [DBG] Connection id "0HNC3QNEQCJB2" disconnecting.
2025-04-25 16:49:07.207 +08:00 [DBG] POST requests are not supported
2025-04-25 16:49:07.208 +08:00 [DBG] Connection id "0HNC3QNEQCJB2" stopped.
2025-04-25 16:49:07.211 +08:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2025-04-25 16:49:07.220 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2025-04-25 16:49:07.224 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:49:07.232 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-25 16:49:07.235 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:49:07.244 +08:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2025-04-25 16:49:07.254 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:49:07.256 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:49:07.258 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:49:07.260 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:49:07.267 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:49:07.270 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 16:49:07.272 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 16:49:07.275 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 16:49:07.278 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2025-04-25 16:49:07.287 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2025-04-25 16:49:07.288 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2025-04-25 16:49:07.304 +08:00 [DBG] Connection id "0HNC3QNEQCJB3", Request id "0HNC3QNEQCJB3:00000001": started reading request body.
2025-04-25 16:49:07.357 +08:00 [DBG] Connection id "0HNC3QNEQCJB3", Request id "0HNC3QNEQCJB3:00000001": done reading request body.
2025-04-25 16:49:07.498 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:49:07.577 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:49:07.587 +08:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 16:49:07.652 +08:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:49:07.677 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:49:07.686 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:49:07.688 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:49:07.689 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:49:07.690 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-04-25 16:49:07.692 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-25 16:49:07.697 +08:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 427.2083ms
2025-04-25 16:49:07.702 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:49:07.704 +08:00 [DBG] Connection id "0HNC3QNEQCJB3" completed keep alive response.
2025-04-25 16:49:07.706 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - 200 null text/plain; charset=utf-8 513.4135ms
2025-04-25 16:49:19.306 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 16:49:19.311 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:49:19.314 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:49:19.316 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:49:19.319 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:49:19.332 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 16:49:19.369 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 16:49:19.372 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 16:49:19.375 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 16:49:19.384 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 16:49:19.386 +08:00 [DBG] Connection id "0HNC3QNEQCJB3" completed keep alive response.
2025-04-25 16:49:19.387 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 401 0 null 80.8873ms
2025-04-25 16:49:24.126 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 16:49:24.134 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:49:24.136 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 16:49:24.138 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 16:49:24.142 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:49:24.154 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 16:49:24.171 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 16:49:24.176 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 16:49:24.185 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 16:49:24.189 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 16:49:24.192 +08:00 [DBG] Connection id "0HNC3QNEQCJB3" completed keep alive response.
2025-04-25 16:49:24.206 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 401 0 null 79.8634ms
2025-04-25 16:49:34.010 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 16:49:34.014 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:49:34.015 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:49:34.022 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:49:34.025 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:49:34.032 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:49:34.037 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:49:34.039 +08:00 [DBG] Authorization was successful.
2025-04-25 16:49:34.040 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:49:34.054 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 16:49:34.057 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:49:34.059 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:49:34.062 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:49:34.067 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:49:34.069 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 16:49:34.071 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:49:34.075 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:49:34.079 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:49:34.089 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 16:49:34.100 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:49:34.101 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:49:34.102 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:49:34.104 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:49:34.139 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:49:34.150 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2025-04-25 16:49:34.182 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1)), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 16:49:34.218 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:49:34.220 +08:00 [DBG] Created DbConnection. (2ms).
2025-04-25 16:49:34.221 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:49:34.222 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:49:34.223 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:49:34.224 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 16:49:34.225 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:49:34.236 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:49:34.240 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:49:34.245 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:49:34.250 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 7ms reading results.
2025-04-25 16:49:34.252 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:49:34.254 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:49:34.257 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 16:49:34.262 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 16:49:34.266 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 192.8403ms
2025-04-25 16:49:34.268 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:49:34.270 +08:00 [DBG] Connection id "0HNC3QNEQCJB3" completed keep alive response.
2025-04-25 16:49:34.272 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:49:34.273 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:49:34.275 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:49:34.278 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 268.6263ms
2025-04-25 16:49:40.305 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 16:49:40.308 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:49:40.309 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:49:40.311 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:49:40.316 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:49:40.322 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 16:49:40.334 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 16:49:40.339 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 16:49:40.340 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 16:49:40.341 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 16:49:40.343 +08:00 [DBG] Connection id "0HNC3QNEQCJB3" completed keep alive response.
2025-04-25 16:49:40.356 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 401 0 null 50.5209ms
2025-04-25 16:50:07.271 +08:00 [DBG] Connection id "0HNC3QNEQCJB1" disconnecting.
2025-04-25 16:50:07.275 +08:00 [DBG] Connection id "0HNC3QNEQCJB1" stopped.
2025-04-25 16:50:07.280 +08:00 [DBG] Connection id "0HNC3QNEQCJB1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:51:51.411 +08:00 [DBG] Connection id "0HNC3QNEQCJB3" disconnecting.
2025-04-25 16:51:51.412 +08:00 [DBG] Connection id "0HNC3QNEQCJB3" stopped.
2025-04-25 16:51:51.413 +08:00 [DBG] Connection id "0HNC3QNEQCJB3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:52:57.353 +08:00 [DBG] Connection id "0HNC3QNEQCJB4" received FIN.
2025-04-25 16:52:57.357 +08:00 [DBG] Connection id "0HNC3QNEQCJB4" accepted.
2025-04-25 16:52:57.364 +08:00 [DBG] Connection id "0HNC3QNEQCJB4" started.
2025-04-25 16:52:57.380 +08:00 [DBG] Connection id "0HNC3QNEQCJB5" accepted.
2025-04-25 16:52:57.389 +08:00 [DBG] Connection id "0HNC3QNEQCJB5" started.
2025-04-25 16:52:57.385 +08:00 [DBG] Connection id "0HNC3QNEQCJB4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:52:57.395 +08:00 [DBG] Connection id "0HNC3QNEQCJB4" disconnecting.
2025-04-25 16:52:57.396 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - application/json 111
2025-04-25 16:52:57.397 +08:00 [DBG] Connection id "0HNC3QNEQCJB4" stopped.
2025-04-25 16:52:57.425 +08:00 [DBG] POST requests are not supported
2025-04-25 16:52:57.430 +08:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2025-04-25 16:52:57.461 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2025-04-25 16:52:57.699 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:52:57.963 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-25 16:52:57.980 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:52:58.122 +08:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2025-04-25 16:52:58.132 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:52:58.138 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:52:58.139 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:52:58.142 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:52:58.143 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:52:58.146 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 16:52:58.148 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 16:52:58.155 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 16:52:58.160 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2025-04-25 16:52:58.162 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2025-04-25 16:52:58.163 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2025-04-25 16:52:58.165 +08:00 [DBG] Connection id "0HNC3QNEQCJB5", Request id "0HNC3QNEQCJB5:00000001": started reading request body.
2025-04-25 16:52:58.173 +08:00 [DBG] Connection id "0HNC3QNEQCJB5", Request id "0HNC3QNEQCJB5:00000001": done reading request body.
2025-04-25 16:52:58.178 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:52:58.182 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:52:58.191 +08:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 16:52:58.197 +08:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:52:58.210 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:52:58.215 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:52:58.221 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:52:58.222 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:52:58.223 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-04-25 16:52:58.225 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-25 16:52:58.235 +08:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 89.1254ms
2025-04-25 16:52:58.239 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:52:58.248 +08:00 [DBG] Connection id "0HNC3QNEQCJB5" completed keep alive response.
2025-04-25 16:52:58.260 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - 200 null text/plain; charset=utf-8 864.607ms
2025-04-25 16:53:23.205 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 16:53:23.222 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:53:23.224 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:53:23.236 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:53:23.241 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:53:23.255 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:53:23.261 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:53:23.272 +08:00 [DBG] Authorization was successful.
2025-04-25 16:53:23.290 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:53:23.291 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 16:53:23.293 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:53:23.295 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:53:23.304 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:53:23.330 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:53:23.340 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 16:53:23.342 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:53:23.361 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:53:23.363 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:53:23.370 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 16:53:23.372 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:53:23.374 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:53:23.375 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:53:23.377 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:53:23.611 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:53:23.639 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:53:23.641 +08:00 [DBG] Created DbConnection. (2ms).
2025-04-25 16:53:23.645 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:53:23.656 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:23.658 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:53:23.659 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:53:23.661 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 16:53:23.663 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:53:23.710 +08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:53:23.714 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:23.721 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 8ms reading results.
2025-04-25 16:53:23.723 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:23.724 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2025-04-25 16:53:23.726 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 16:53:23.734 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 16:53:23.739 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 396.6922ms
2025-04-25 16:53:23.741 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:53:23.742 +08:00 [DBG] Connection id "0HNC3QNEQCJB5" completed keep alive response.
2025-04-25 16:53:23.743 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:53:23.753 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:53:23.754 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:53:23.758 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 552.1687ms
2025-04-25 16:53:30.083 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 16:53:30.184 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:53:30.191 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:53:30.194 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:53:30.212 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:53:30.227 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 16:53:30.292 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 16:53:30.294 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 16:53:30.295 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 16:53:30.310 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 16:53:30.341 +08:00 [DBG] Connection id "0HNC3QNEQCJB5" completed keep alive response.
2025-04-25 16:53:30.356 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 401 0 null 273.5215ms
2025-04-25 16:53:35.461 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 16:53:35.492 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:53:35.493 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:53:35.496 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 16:53:35.511 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:53:35.521 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:53:35.525 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:53:35.530 +08:00 [DBG] Authorization was successful.
2025-04-25 16:53:35.537 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:53:35.559 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 16:53:35.573 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:53:35.574 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:53:35.576 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:53:35.579 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:53:35.590 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 16:53:35.593 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:53:35.596 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 16:53:35.607 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:53:35.611 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 16:53:35.613 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:53:35.621 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:53:35.622 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 16:53:35.623 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 16:53:35.625 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:53:35.640 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:53:35.642 +08:00 [DBG] Created DbConnection. (2ms).
2025-04-25 16:53:35.644 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:53:35.646 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:35.658 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:53:35.659 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:53:35.661 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 16:53:35.663 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:53:35.675 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 16:53:35.693 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:35.705 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 12ms reading results.
2025-04-25 16:53:35.709 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:35.712 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 16:53:35.720 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 16:53:35.724 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 16:53:35.725 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 132.2861ms
2025-04-25 16:53:35.729 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 16:53:35.759 +08:00 [DBG] Connection id "0HNC3QNEQCJB5" completed keep alive response.
2025-04-25 16:53:35.773 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:53:35.774 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:53:35.777 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:53:35.794 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 332.2758ms
2025-04-25 16:53:41.023 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:53:41.036 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:53:41.041 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:53:41.044 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:53:41.066 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:53:41.077 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:53:41.083 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:53:41.093 +08:00 [DBG] Authorization was successful.
2025-04-25 16:53:41.094 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:53:41.111 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 16:53:41.151 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:53:41.174 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:53:41.179 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:53:41.240 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:53:41.242 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:53:41.246 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:53:41.273 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:53:41.279 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 16:53:41.290 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 16:53:41.293 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 16:53:41.296 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:53:41.310 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:53:41.312 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 16:53:41.318 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 16:53:41.321 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:53:41.324 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 16:53:41.328 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:53:41.339 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:53:41.340 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:53:41.341 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:53:41.343 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:53:41.344 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:53:41.346 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:53:41.362 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:53:41.373 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:53:41.374 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:53:41.377 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:53:41.378 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:53:41.379 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:53:41.386 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:53:41.390 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:53:41.392 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:53:41.393 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:53:41.396 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:53:41.408 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:53:41.411 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:53:41.425 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:53:41.429 +08:00 [DBG] Created DbConnection. (4ms).
2025-04-25 16:53:41.442 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:53:41.444 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:41.446 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:53:41.459 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (12ms).
2025-04-25 16:53:41.479 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (32ms).
2025-04-25 16:53:41.553 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:53:41.559 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:53:41.562 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:41.569 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 8ms reading results.
2025-04-25 16:53:41.572 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:41.573 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:53:41.578 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:53:41.582 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:41.592 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:53:41.594 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:53:41.595 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 16:53:41.601 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:53:41.605 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:53:41.619 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:41.625 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:41.626 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:41.635 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:41.641 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:41.644 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:41.651 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:41.658 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:41.659 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:41.661 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:41.663 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:41.675 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 63ms reading results.
2025-04-25 16:53:41.679 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:41.693 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (13ms).
2025-04-25 16:53:41.708 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:53:41.711 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:53:41.712 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:53:41.720 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:53:41.721 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 16:53:41.723 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 16:53:41.739 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 493.6333ms
2025-04-25 16:53:41.743 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:53:41.769 +08:00 [DBG] Connection id "0HNC3QNEQCJB5" completed keep alive response.
2025-04-25 16:53:41.806 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:53:41.809 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:53:41.812 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (3ms).
2025-04-25 16:53:41.815 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 791.6822ms
2025-04-25 16:53:47.743 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:53:47.746 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:53:47.760 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:53:47.762 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:53:47.794 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:53:47.829 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 16:53:48.439 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 16:53:48.443 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 16:53:48.445 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 16:53:48.609 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 16:53:48.611 +08:00 [DBG] Connection id "0HNC3QNEQCJB5" completed keep alive response.
2025-04-25 16:53:48.624 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 401 0 null 881.4648ms
2025-04-25 16:53:55.492 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:53:55.494 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:53:55.501 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:53:55.519 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:53:55.545 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:53:55.565 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:53:55.572 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:53:55.577 +08:00 [DBG] Authorization was successful.
2025-04-25 16:53:55.578 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:53:55.593 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 16:53:55.610 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:53:55.612 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:53:55.640 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:53:55.645 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:53:55.661 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:53:55.673 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:53:55.689 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:53:55.693 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 16:53:55.702 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 16:53:55.711 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 16:53:55.733 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:53:55.741 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:53:55.743 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 16:53:55.745 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 16:53:55.751 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:53:55.753 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 16:53:55.755 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:53:55.756 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:53:55.760 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:53:55.761 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:53:55.762 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:53:55.771 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:53:55.772 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:53:55.775 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:53:55.792 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:53:55.794 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:53:55.802 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:53:55.805 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:53:55.809 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:53:55.811 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:53:55.812 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:53:55.821 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:53:55.822 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:53:55.823 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:53:55.824 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:53:55.826 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:53:55.842 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:53:55.851 +08:00 [DBG] Created DbConnection. (9ms).
2025-04-25 16:53:55.858 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:53:55.860 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:55.861 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:53:55.861 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 16:53:55.865 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 16:53:55.872 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:53:55.873 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:53:55.876 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:55.884 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 6ms reading results.
2025-04-25 16:53:55.892 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:55.893 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2025-04-25 16:53:55.894 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:53:55.895 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:55.906 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:53:55.909 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-25 16:53:55.911 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-25 16:53:55.915 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:53:55.923 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:53:55.925 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:55.926 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:55.928 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:55.934 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:55.936 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:55.940 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:55.943 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:55.945 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:55.960 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:55.962 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:53:55.969 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:55.971 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 47ms reading results.
2025-04-25 16:53:55.973 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:53:55.974 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 16:53:55.985 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:53:55.991 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:53:55.992 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:53:55.993 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:53:55.994 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 16:53:56.001 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 16:53:56.004 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 330.7747ms
2025-04-25 16:53:56.006 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:53:56.011 +08:00 [DBG] Connection id "0HNC3QNEQCJB5" completed keep alive response.
2025-04-25 16:53:56.021 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:53:56.022 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:53:56.026 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (3ms).
2025-04-25 16:53:56.189 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 696.9333ms
2025-04-25 16:56:07.027 +08:00 [DBG] Connection id "0HNC3QNEQCJB5" disconnecting.
2025-04-25 16:56:07.686 +08:00 [DBG] Connection id "0HNC3QNEQCJB5" stopped.
2025-04-25 16:56:07.780 +08:00 [DBG] Connection id "0HNC3QNEQCJB5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:57:49.821 +08:00 [DBG] Connection id "0HNC3QNEQCJB6" received FIN.
2025-04-25 16:57:49.841 +08:00 [DBG] Connection id "0HNC3QNEQCJB6" accepted.
2025-04-25 16:57:49.847 +08:00 [DBG] Connection id "0HNC3QNEQCJB6" started.
2025-04-25 16:57:49.860 +08:00 [DBG] Connection id "0HNC3QNEQCJB7" accepted.
2025-04-25 16:57:49.873 +08:00 [DBG] Connection id "0HNC3QNEQCJB6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:57:49.889 +08:00 [DBG] Connection id "0HNC3QNEQCJB7" started.
2025-04-25 16:57:49.892 +08:00 [DBG] Connection id "0HNC3QNEQCJB6" disconnecting.
2025-04-25 16:57:49.896 +08:00 [DBG] Connection id "0HNC3QNEQCJB6" stopped.
2025-04-25 16:57:49.926 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:57:49.947 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:57:49.958 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:57:49.960 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:57:49.963 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:57:49.997 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:57:50.001 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:57:50.010 +08:00 [DBG] Authorization was successful.
2025-04-25 16:57:50.021 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:57:50.047 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 16:57:50.055 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:57:50.059 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:57:50.064 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:57:50.066 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:57:50.077 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:57:50.085 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:57:50.113 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:57:50.123 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 16:57:50.127 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 16:57:50.140 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 16:57:50.145 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:57:50.156 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:57:50.159 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 16:57:50.162 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 16:57:50.164 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:57:50.173 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 16:57:50.175 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:57:50.179 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:57:50.182 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:57:50.191 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:57:50.194 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:57:50.196 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:57:50.202 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:57:50.206 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:57:50.211 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:57:50.213 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:57:50.215 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:57:50.222 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:57:50.225 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:57:50.227 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:57:50.232 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:57:50.240 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:57:50.243 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:57:50.245 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:57:50.247 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:57:50.276 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:57:50.294 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:57:50.297 +08:00 [DBG] Created DbConnection. (3ms).
2025-04-25 16:57:50.308 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:57:50.322 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:57:50.330 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:57:50.337 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2025-04-25 16:57:50.340 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-04-25 16:57:50.343 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:57:50.364 +08:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:57:50.375 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:57:50.379 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 5ms reading results.
2025-04-25 16:57:50.382 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:57:50.392 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (10ms).
2025-04-25 16:57:50.402 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:57:50.409 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:57:50.414 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:57:50.415 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 16:57:50.423 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-04-25 16:57:50.430 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:57:50.443 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:57:50.457 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:57:50.462 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:57:50.465 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:57:50.477 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:57:50.490 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:57:50.497 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:57:50.512 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:57:50.523 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:57:50.531 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:57:50.542 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:57:50.545 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:57:50.556 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 94ms reading results.
2025-04-25 16:57:50.564 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:57:50.577 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (12ms).
2025-04-25 16:57:50.602 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:57:50.633 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:57:50.697 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:57:50.704 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:57:50.712 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 16:57:50.714 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 16:57:50.740 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 658.5298ms
2025-04-25 16:57:50.744 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:57:50.746 +08:00 [DBG] Connection id "0HNC3QNEQCJB7" completed keep alive response.
2025-04-25 16:57:50.765 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:57:50.773 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:57:50.776 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 16:57:50.779 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 856.5179ms
2025-04-25 16:58:31.013 +08:00 [INF] Application is shutting down...
2025-04-25 16:58:31.023 +08:00 [DBG] Hosting stopping
2025-04-25 16:58:31.101 +08:00 [DBG] Connection id "0HNC3QNEQCJB7" disconnecting.
2025-04-25 16:58:31.107 +08:00 [DBG] Connection id "0HNC3QNEQCJB7" stopped.
2025-04-25 16:58:31.109 +08:00 [DBG] Connection id "0HNC3QNEQCJB7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:58:31.132 +08:00 [DBG] Hosting stopped
2025-04-25 16:58:57.533 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-25 16:58:58.591 +08:00 [DBG] Hosting starting
2025-04-25 16:58:58.678 +08:00 [INF] User profile is available. Using 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-25 16:58:58.739 +08:00 [DBG] Reading data from file 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys\key-921e173d-5e38-48fb-a73b-0d9c13e74309.xml'.
2025-04-25 16:58:58.817 +08:00 [DBG] Found key {921e173d-5e38-48fb-a73b-0d9c13e74309}.
2025-04-25 16:58:58.895 +08:00 [DBG] Considering key {921e173d-5e38-48fb-a73b-0d9c13e74309} with expiration date 2025-07-23 09:56:55Z as default key.
2025-04-25 16:58:58.954 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 16:58:59.015 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-25 16:58:59.040 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 16:58:59.099 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-25 16:58:59.371 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-25 16:58:59.397 +08:00 [DBG] Using key {921e173d-5e38-48fb-a73b-0d9c13e74309} as the default key.
2025-04-25 16:58:59.421 +08:00 [DBG] Key ring with default key {921e173d-5e38-48fb-a73b-0d9c13e74309} was loaded during application startup.
2025-04-25 16:58:59.681 +08:00 [INF] Now listening on: http://localhost:5212
2025-04-25 16:58:59.687 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2025-04-25 16:58:59.689 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-25 16:58:59.690 +08:00 [INF] Hosting environment: Development
2025-04-25 16:58:59.692 +08:00 [INF] Content root path: C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API
2025-04-25 16:58:59.694 +08:00 [DBG] Hosting started
2025-04-25 16:59:30.238 +08:00 [DBG] Connection id "0HNC3QTUN5MJO" received FIN.
2025-04-25 16:59:30.259 +08:00 [DBG] Connection id "0HNC3QTUN5MJO" accepted.
2025-04-25 16:59:30.270 +08:00 [DBG] Connection id "0HNC3QTUN5MJO" started.
2025-04-25 16:59:30.275 +08:00 [DBG] Connection id "0HNC3QTUN5MJP" accepted.
2025-04-25 16:59:30.334 +08:00 [DBG] Connection id "0HNC3QTUN5MJP" started.
2025-04-25 16:59:30.321 +08:00 [DBG] Connection id "0HNC3QTUN5MJO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 16:59:30.343 +08:00 [DBG] Connection id "0HNC3QTUN5MJO" disconnecting.
2025-04-25 16:59:30.363 +08:00 [DBG] Connection id "0HNC3QTUN5MJO" stopped.
2025-04-25 16:59:30.409 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:59:30.434 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 16:59:30.497 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:59:30.501 +08:00 [WRN] Failed to determine the https port for redirect.
2025-04-25 16:59:30.574 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:59:30.587 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:59:30.593 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:59:30.853 +08:00 [DBG] Successfully validated the token.
2025-04-25 16:59:30.854 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 16:59:30.866 +08:00 [DBG] Authorization was successful.
2025-04-25 16:59:30.870 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:59:30.938 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 16:59:30.942 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:59:30.943 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:59:30.956 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:59:30.969 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:59:30.976 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:59:30.992 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:59:31.234 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-25 16:59:31.547 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 16:59:31.558 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 16:59:31.572 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 16:59:31.576 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 16:59:31.589 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:59:31.592 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 16:59:31.602 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 16:59:31.605 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 16:59:31.608 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:59:31.619 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 16:59:31.620 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:59:31.622 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:59:31.623 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:59:31.625 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 16:59:31.626 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 16:59:31.651 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:59:31.653 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:59:31.655 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:59:31.657 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:59:31.660 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:59:31.674 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 16:59:31.676 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 16:59:31.693 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:59:31.706 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 16:59:31.709 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:59:31.717 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:59:31.722 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:59:31.723 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 16:59:31.725 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 16:59:32.886 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 16:59:32.937 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2025-04-25 16:59:33.377 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 16:59:33.458 +08:00 [DBG] Creating DbConnection.
2025-04-25 16:59:33.488 +08:00 [DBG] Created DbConnection. (28ms).
2025-04-25 16:59:33.504 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:59:33.540 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:59:33.559 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:59:33.574 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2025-04-25 16:59:33.576 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2025-04-25 16:59:33.596 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:59:33.657 +08:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 16:59:33.683 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:59:33.708 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 29ms reading results.
2025-04-25 16:59:33.755 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:59:33.773 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (17ms).
2025-04-25 16:59:33.807 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2025-04-25 16:59:33.923 +08:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<City>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        City entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            City instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(City);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: City.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (City)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")]: 
                        {
                            return 
                            {
                                City instance;
                                instance = new City(dataReader.GetString(2));
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(City)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: CityInfo.API.DbContexts.CityInfoContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-25 16:59:34.023 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:59:34.107 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:59:34.115 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 16:59:34.120 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-04-25 16:59:34.142 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (28ms).
2025-04-25 16:59:34.184 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:59:34.196 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 16:59:34.706 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:59:34.775 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:59:34.785 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:59:34.787 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:59:34.789 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:59:34.792 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:59:34.824 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:59:34.826 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:59:34.837 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:59:34.850 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 16:59:34.874 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:59:34.883 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 261ms reading results.
2025-04-25 16:59:34.900 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 16:59:34.904 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (3ms).
2025-04-25 16:59:35.234 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:59:35.256 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:59:35.257 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:59:35.268 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:59:35.316 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 16:59:35.326 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 16:59:35.642 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 4643.1005ms
2025-04-25 16:59:35.685 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:59:35.692 +08:00 [DBG] Connection id "0HNC3QTUN5MJP" completed keep alive response.
2025-04-25 16:59:35.703 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 16:59:35.716 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 16:59:35.721 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (5ms).
2025-04-25 16:59:35.732 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 5325.7845ms
2025-04-25 16:59:44.913 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - application/json 111
2025-04-25 16:59:44.919 +08:00 [DBG] POST requests are not supported
2025-04-25 16:59:44.923 +08:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2025-04-25 16:59:44.924 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2025-04-25 16:59:44.925 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:59:44.935 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-25 16:59:44.937 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:59:44.960 +08:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2025-04-25 16:59:44.992 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 16:59:45.004 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 16:59:45.006 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 16:59:45.018 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 16:59:45.022 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 16:59:45.024 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 16:59:45.034 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 16:59:45.069 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 16:59:45.139 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2025-04-25 16:59:45.163 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2025-04-25 16:59:45.193 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2025-04-25 16:59:45.221 +08:00 [DBG] Connection id "0HNC3QTUN5MJP", Request id "0HNC3QTUN5MJP:00000002": started reading request body.
2025-04-25 16:59:45.241 +08:00 [DBG] Connection id "0HNC3QTUN5MJP", Request id "0HNC3QTUN5MJP:00000002": done reading request body.
2025-04-25 16:59:45.342 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:59:45.352 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:59:45.354 +08:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 16:59:45.368 +08:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 16:59:45.434 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 16:59:45.455 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 16:59:45.457 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 16:59:45.465 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 16:59:45.474 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-04-25 16:59:45.476 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-25 16:59:45.492 +08:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 467.4424ms
2025-04-25 16:59:45.529 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 16:59:45.541 +08:00 [DBG] Connection id "0HNC3QTUN5MJP" completed keep alive response.
2025-04-25 16:59:45.567 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - 200 null text/plain; charset=utf-8 653.8583ms
2025-04-25 16:59:58.894 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 16:59:58.898 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 16:59:58.901 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 16:59:58.902 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 16:59:58.907 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 16:59:58.973 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenException: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.DecryptToken(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWEAsync(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 16:59:59.615 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
2025-04-25 16:59:59.622 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 16:59:59.629 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 16:59:59.671 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 16:59:59.672 +08:00 [DBG] Connection id "0HNC3QTUN5MJP" completed keep alive response.
2025-04-25 16:59:59.674 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 401 0 null 779.3926ms
2025-04-25 17:00:05.871 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 17:00:05.958 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 17:00:05.970 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 17:00:05.971 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 17:00:06.057 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 17:00:06.153 +08:00 [DBG] Successfully validated the token.
2025-04-25 17:00:06.199 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 17:00:06.212 +08:00 [DBG] Authorization was successful.
2025-04-25 17:00:06.216 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 17:00:06.221 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 17:00:06.238 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 17:00:06.252 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 17:00:06.256 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 17:00:06.272 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 17:00:06.273 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 17:00:06.283 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 17:00:06.299 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 17:00:06.313 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 17:00:06.324 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 17:00:06.373 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 17:00:06.438 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 17:00:06.440 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 17:00:06.464 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 17:00:06.473 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 17:00:06.484 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 17:00:06.485 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 17:00:06.500 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 17:00:06.516 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 17:00:06.521 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 17:00:06.656 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 17:00:06.744 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 17:00:06.791 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 17:00:06.806 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 17:00:06.891 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 17:00:07.033 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 17:00:07.040 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 17:00:07.106 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 17:00:07.130 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 17:00:07.141 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 17:00:07.154 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 17:00:07.164 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 17:00:07.181 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 17:00:07.188 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 17:00:07.191 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 17:00:07.198 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 17:00:07.320 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 17:00:07.355 +08:00 [DBG] Creating DbConnection.
2025-04-25 17:00:07.364 +08:00 [DBG] Created DbConnection. (8ms).
2025-04-25 17:00:07.369 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 17:00:07.389 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 17:00:07.396 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 17:00:07.403 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (11ms).
2025-04-25 17:00:07.406 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-04-25 17:00:07.423 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 17:00:07.456 +08:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 17:00:07.474 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 17:00:07.773 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 299ms reading results.
2025-04-25 17:00:07.808 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 17:00:07.817 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (8ms).
2025-04-25 17:00:07.850 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 17:00:07.855 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 17:00:07.857 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 17:00:07.864 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-04-25 17:00:07.883 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (26ms).
2025-04-25 17:00:07.889 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 17:00:07.905 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 17:00:07.914 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 17:00:07.921 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 17:00:07.933 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 17:00:07.982 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 17:00:08.035 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 17:00:10.449 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 17:00:11.233 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 17:00:11.641 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 17:00:11.643 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 17:00:11.649 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 17:00:11.651 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 17:00:11.652 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 3738ms reading results.
2025-04-25 17:00:11.654 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 17:00:11.655 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 17:00:11.659 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 17:00:11.662 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 17:00:11.663 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 17:00:11.664 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 17:00:11.665 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 17:00:11.666 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 17:00:11.669 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 5385.4293ms
2025-04-25 17:00:11.670 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 17:00:11.672 +08:00 [DBG] Connection id "0HNC3QTUN5MJP" completed keep alive response.
2025-04-25 17:00:11.673 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 17:00:11.674 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 17:00:11.676 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 17:00:11.678 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 5806.6571ms
2025-04-25 17:02:23.460 +08:00 [DBG] Connection id "0HNC3QTUN5MJP" disconnecting.
2025-04-25 17:02:23.465 +08:00 [DBG] Connection id "0HNC3QTUN5MJP" stopped.
2025-04-25 17:02:23.470 +08:00 [DBG] Connection id "0HNC3QTUN5MJP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:35:09.188 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-25 19:35:09.484 +08:00 [DBG] Hosting starting
2025-04-25 19:35:09.518 +08:00 [INF] User profile is available. Using 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-25 19:35:09.550 +08:00 [DBG] Reading data from file 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys\key-921e173d-5e38-48fb-a73b-0d9c13e74309.xml'.
2025-04-25 19:35:09.592 +08:00 [DBG] Found key {921e173d-5e38-48fb-a73b-0d9c13e74309}.
2025-04-25 19:35:09.622 +08:00 [DBG] Considering key {921e173d-5e38-48fb-a73b-0d9c13e74309} with expiration date 2025-07-23 09:56:55Z as default key.
2025-04-25 19:35:09.632 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 19:35:09.641 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-25 19:35:09.650 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 19:35:09.679 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-25 19:35:09.684 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-25 19:35:09.690 +08:00 [DBG] Using key {921e173d-5e38-48fb-a73b-0d9c13e74309} as the default key.
2025-04-25 19:35:09.694 +08:00 [DBG] Key ring with default key {921e173d-5e38-48fb-a73b-0d9c13e74309} was loaded during application startup.
2025-04-25 19:35:09.824 +08:00 [INF] Now listening on: http://localhost:5212
2025-04-25 19:35:09.829 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2025-04-25 19:35:09.831 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-25 19:35:09.833 +08:00 [INF] Hosting environment: Development
2025-04-25 19:35:09.842 +08:00 [INF] Content root path: C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API
2025-04-25 19:35:09.843 +08:00 [DBG] Hosting started
2025-04-25 19:35:15.151 +08:00 [DBG] Connection id "0HNC3TKVN75G5" received FIN.
2025-04-25 19:35:15.217 +08:00 [DBG] Connection id "0HNC3TKVN75G5" accepted.
2025-04-25 19:35:15.232 +08:00 [DBG] Connection id "0HNC3TKVN75G5" started.
2025-04-25 19:35:15.245 +08:00 [DBG] Connection id "0HNC3TKVN75G6" accepted.
2025-04-25 19:35:15.248 +08:00 [DBG] Connection id "0HNC3TKVN75G6" started.
2025-04-25 19:35:15.257 +08:00 [DBG] Connection id "0HNC3TKVN75G5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:35:15.266 +08:00 [DBG] Connection id "0HNC3TKVN75G5" disconnecting.
2025-04-25 19:35:15.300 +08:00 [DBG] Connection id "0HNC3TKVN75G5" stopped.
2025-04-25 19:35:15.361 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 19:35:15.367 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 19:35:15.432 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:35:15.438 +08:00 [WRN] Failed to determine the https port for redirect.
2025-04-25 19:35:15.629 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 19:35:15.696 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 19:35:15.743 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 19:35:16.042 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:35:16.045 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:35:16.061 +08:00 [DBG] Authorization was successful.
2025-04-25 19:35:16.066 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 19:35:16.165 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 19:35:16.172 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:35:16.175 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:35:16.180 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:35:16.192 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:35:16.194 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 19:35:16.201 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 19:35:16.471 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-25 19:35:16.827 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 19:35:16.839 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 19:35:16.846 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 19:35:16.848 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 19:35:16.850 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 19:35:16.860 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 19:35:16.861 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 19:35:16.864 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 19:35:16.868 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 19:35:16.878 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 19:35:16.881 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 19:35:16.883 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 19:35:16.885 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 19:35:16.897 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 19:35:16.899 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 19:35:16.900 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 19:35:16.910 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 19:35:16.912 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 19:35:16.914 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 19:35:16.916 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 19:35:16.918 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 19:35:16.928 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 19:35:16.930 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 19:35:16.932 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 19:35:16.937 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 19:35:16.942 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 19:35:16.944 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 19:35:16.946 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 19:35:16.949 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 19:35:18.273 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:35:18.337 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2025-04-25 19:35:18.871 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 19:35:18.962 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:35:18.998 +08:00 [DBG] Created DbConnection. (33ms).
2025-04-25 19:35:19.012 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:35:19.071 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:35:19.082 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:35:19.099 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (11ms).
2025-04-25 19:35:19.115 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (33ms).
2025-04-25 19:35:19.180 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 19:35:19.245 +08:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 19:35:19.267 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:35:19.294 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 25ms reading results.
2025-04-25 19:35:19.306 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:35:19.316 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (13ms).
2025-04-25 19:35:19.358 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2025-04-25 19:35:19.482 +08:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<City>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        City entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            City instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(City);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: City.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (City)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")]: 
                        {
                            return 
                            {
                                City instance;
                                instance = new City(dataReader.GetString(2));
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(City)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: CityInfo.API.DbContexts.CityInfoContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-25 19:35:19.548 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:35:19.551 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:35:19.563 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:35:19.565 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:35:19.577 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-04-25 19:35:19.585 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 19:35:19.609 +08:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 19:35:19.674 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:35:19.726 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:35:19.729 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:35:19.731 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:35:19.734 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:35:19.742 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:35:19.745 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:35:19.748 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:35:19.750 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:35:19.755 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:35:19.761 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:35:19.763 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 149ms reading results.
2025-04-25 19:35:19.766 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:35:19.770 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (4ms).
2025-04-25 19:35:20.004 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 19:35:20.033 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 19:35:20.050 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 19:35:20.058 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 19:35:20.062 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 19:35:20.065 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 19:35:20.289 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 4083.3094ms
2025-04-25 19:35:20.299 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 19:35:20.310 +08:00 [DBG] Connection id "0HNC3TKVN75G6" completed keep alive response.
2025-04-25 19:35:20.330 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:35:20.364 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:35:20.418 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (51ms).
2025-04-25 19:35:21.479 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 6127.6886ms
2025-04-25 19:37:33.169 +08:00 [DBG] Connection id "0HNC3TKVN75G6" disconnecting.
2025-04-25 19:37:33.174 +08:00 [DBG] Connection id "0HNC3TKVN75G6" stopped.
2025-04-25 19:37:33.176 +08:00 [DBG] Connection id "0HNC3TKVN75G6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:38:29.059 +08:00 [DBG] Connection id "0HNC3TKVN75G7" accepted.
2025-04-25 19:38:29.059 +08:00 [DBG] Connection id "0HNC3TKVN75G7" received FIN.
2025-04-25 19:38:29.087 +08:00 [DBG] Connection id "0HNC3TKVN75G8" accepted.
2025-04-25 19:38:29.088 +08:00 [DBG] Connection id "0HNC3TKVN75G7" started.
2025-04-25 19:38:29.107 +08:00 [DBG] Connection id "0HNC3TKVN75G8" started.
2025-04-25 19:38:29.116 +08:00 [DBG] Connection id "0HNC3TKVN75G7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:38:29.157 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 19:38:29.186 +08:00 [DBG] Connection id "0HNC3TKVN75G7" disconnecting.
2025-04-25 19:38:29.288 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:38:29.289 +08:00 [DBG] Connection id "0HNC3TKVN75G7" stopped.
2025-04-25 19:38:29.316 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:38:29.338 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:38:29.396 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:38:29.532 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:38:29.602 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:38:29.703 +08:00 [DBG] Authorization was successful.
2025-04-25 19:38:29.739 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:38:29.806 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 19:38:29.865 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:38:29.885 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:38:29.897 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:38:29.923 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:38:29.937 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 19:38:29.987 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:38:30.014 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:38:30.019 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:38:30.031 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 19:38:30.038 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:38:30.040 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:38:30.049 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:38:30.052 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:38:30.117 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:38:30.124 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2025-04-25 19:38:30.178 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1)), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 19:38:30.204 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:38:30.205 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 19:38:30.205 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:38:30.207 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:38:30.219 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:38:30.221 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 19:38:30.222 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:38:30.223 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:38:30.235 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:38:30.237 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:38:30.238 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 19:38:30.240 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:38:30.247 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (6ms).
2025-04-25 19:38:30.251 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 19:38:30.254 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 19:38:30.256 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 269.9316ms
2025-04-25 19:38:30.264 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:38:30.266 +08:00 [DBG] Connection id "0HNC3TKVN75G8" completed keep alive response.
2025-04-25 19:38:30.268 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:38:30.269 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:38:30.271 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 19:38:30.284 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 1127.0377ms
2025-04-25 19:38:37.096 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - application/json 111
2025-04-25 19:38:37.102 +08:00 [DBG] POST requests are not supported
2025-04-25 19:38:37.103 +08:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2025-04-25 19:38:37.105 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2025-04-25 19:38:37.113 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 19:38:37.117 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-25 19:38:37.121 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 19:38:37.128 +08:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2025-04-25 19:38:37.134 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:38:37.135 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:38:37.137 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:38:37.138 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:38:37.140 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 19:38:37.155 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 19:38:37.167 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 19:38:37.170 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 19:38:37.178 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2025-04-25 19:38:37.186 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2025-04-25 19:38:37.189 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2025-04-25 19:38:37.237 +08:00 [DBG] Connection id "0HNC3TKVN75G8", Request id "0HNC3TKVN75G8:00000002": started reading request body.
2025-04-25 19:38:37.253 +08:00 [DBG] Connection id "0HNC3TKVN75G8", Request id "0HNC3TKVN75G8:00000002": done reading request body.
2025-04-25 19:38:37.417 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 19:38:37.421 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 19:38:37.424 +08:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 19:38:37.477 +08:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 19:38:37.579 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 19:38:37.605 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 19:38:37.609 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 19:38:37.619 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 19:38:37.635 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-04-25 19:38:37.648 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-25 19:38:37.657 +08:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 501.9067ms
2025-04-25 19:38:37.689 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 19:38:37.705 +08:00 [DBG] Connection id "0HNC3TKVN75G8" completed keep alive response.
2025-04-25 19:38:37.766 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - 200 null text/plain; charset=utf-8 670.0758ms
2025-04-25 19:38:46.483 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 19:38:46.487 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:38:46.489 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:38:46.496 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:38:46.500 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:38:46.534 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 19:38:46.585 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 19:38:46.589 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 19:38:46.595 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 19:38:46.611 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 19:38:46.612 +08:00 [DBG] Connection id "0HNC3TKVN75G8" completed keep alive response.
2025-04-25 19:38:46.615 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 401 0 null 132.4972ms
2025-04-25 19:39:25.318 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 19:39:25.708 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:39:25.965 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:39:25.968 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:39:25.970 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:39:25.978 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 19:39:26.018 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 19:39:26.020 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 19:39:26.034 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 19:39:26.037 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 19:39:26.052 +08:00 [DBG] Connection id "0HNC3TKVN75G8" completed keep alive response.
2025-04-25 19:39:26.108 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 401 0 null 789.7851ms
2025-04-25 19:39:37.533 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 19:39:37.546 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:39:37.559 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:39:37.563 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:39:37.565 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:39:37.567 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:39:37.568 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:39:37.570 +08:00 [DBG] Authorization was successful.
2025-04-25 19:39:37.577 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:39:37.579 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 19:39:37.586 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:39:37.594 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:39:37.596 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:39:37.598 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:39:37.603 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 19:39:37.608 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:39:37.625 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:39:37.629 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:39:37.632 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 19:39:37.633 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:39:37.634 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:39:37.636 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:39:37.637 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:39:37.814 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:39:37.848 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:39:37.853 +08:00 [DBG] Created DbConnection. (4ms).
2025-04-25 19:39:37.870 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:39:37.886 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:39:37.897 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:39:37.899 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2025-04-25 19:39:37.902 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-04-25 19:39:37.903 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:39:37.916 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:39:37.930 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:39:37.934 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 5ms reading results.
2025-04-25 19:39:37.947 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:39:37.953 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (6ms).
2025-04-25 19:39:37.969 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2025-04-25 19:39:38.034 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 19:39:38.065 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:39:38.069 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:39:38.083 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:39:38.100 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (16ms).
2025-04-25 19:39:38.103 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2025-04-25 19:39:38.115 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:39:38.117 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:39:38.119 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:39:38.131 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 11ms reading results.
2025-04-25 19:39:38.133 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:39:38.135 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:39:38.149 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2025-04-25 19:39:38.179 +08:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<PointOfInterest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        PointOfInterest entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            PointOfInterest instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(PointOfInterest);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: PointOfInterest.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (PointOfInterest)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: PointOfInterest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: PointOfInterest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest")]: 
                        {
                            return 
                            {
                                PointOfInterest instance;
                                instance = new PointOfInterest(dataReader.GetString(3));
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CityId>k__BackingField = dataReader.GetInt32(1);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: PointOfInterest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(PointOfInterest)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: CityInfo.API.DbContexts.CityInfoContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-25 19:39:38.187 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:39:38.198 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:39:38.203 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:39:38.210 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-04-25 19:39:38.214 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-04-25 19:39:38.215 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:39:38.217 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:39:38.229 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:39:38.243 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:39:38.245 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:39:38.247 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 28ms reading results.
2025-04-25 19:39:38.248 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:39:38.249 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2025-04-25 19:39:38.267 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 19:39:38.269 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 19:39:38.270 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 19:39:38.282 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 19:39:38.283 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 19:39:38.287 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 679.047ms
2025-04-25 19:39:38.293 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:39:38.296 +08:00 [DBG] Connection id "0HNC3TKVN75G8" completed keep alive response.
2025-04-25 19:39:38.298 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:39:38.303 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:39:38.334 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (30ms).
2025-04-25 19:39:38.336 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 803.0168ms
2025-04-25 19:39:45.819 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - application/json 111
2025-04-25 19:39:45.916 +08:00 [DBG] POST requests are not supported
2025-04-25 19:39:45.946 +08:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2025-04-25 19:39:45.953 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2025-04-25 19:39:45.969 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 19:39:46.019 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-25 19:39:46.066 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 19:39:46.068 +08:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2025-04-25 19:39:46.076 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:39:46.078 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:39:46.082 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:39:46.085 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:39:46.094 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 19:39:46.096 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 19:39:46.097 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2025-04-25 19:39:46.100 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 19:39:46.117 +08:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2025-04-25 19:39:46.119 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2025-04-25 19:39:46.133 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2025-04-25 19:39:46.134 +08:00 [DBG] Connection id "0HNC3TKVN75G8", Request id "0HNC3TKVN75G8:00000006": started reading request body.
2025-04-25 19:39:46.135 +08:00 [DBG] Connection id "0HNC3TKVN75G8", Request id "0HNC3TKVN75G8:00000006": done reading request body.
2025-04-25 19:39:46.145 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 19:39:46.148 +08:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 19:39:46.150 +08:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2025-04-25 19:39:46.153 +08:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2025-04-25 19:39:46.160 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 19:39:46.163 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 19:39:46.164 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 19:39:46.166 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 19:39:46.167 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-04-25 19:39:46.169 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-25 19:39:46.183 +08:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 86.7486ms
2025-04-25 19:39:46.185 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2025-04-25 19:39:46.216 +08:00 [DBG] Connection id "0HNC3TKVN75G8" completed keep alive response.
2025-04-25 19:39:46.267 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5212/api/authentication/authenticate - 200 null text/plain; charset=utf-8 447.5664ms
2025-04-25 19:41:02.253 +08:00 [DBG] Connection id "0HNC3TKVN75G9" received FIN.
2025-04-25 19:41:02.263 +08:00 [DBG] Connection id "0HNC3TKVN75G9" accepted.
2025-04-25 19:41:02.289 +08:00 [DBG] Connection id "0HNC3TKVN75G9" started.
2025-04-25 19:41:02.290 +08:00 [DBG] Connection id "0HNC3TKVN75GA" accepted.
2025-04-25 19:41:02.296 +08:00 [DBG] Connection id "0HNC3TKVN75G9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:41:02.328 +08:00 [DBG] Connection id "0HNC3TKVN75GA" started.
2025-04-25 19:41:02.379 +08:00 [DBG] Connection id "0HNC3TKVN75G9" disconnecting.
2025-04-25 19:41:02.397 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 19:41:02.412 +08:00 [DBG] Connection id "0HNC3TKVN75G9" stopped.
2025-04-25 19:41:02.427 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:41:02.432 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:41:02.445 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:41:02.449 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:41:02.489 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:41:02.498 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:41:02.538 +08:00 [DBG] Authorization was successful.
2025-04-25 19:41:02.546 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:41:02.549 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 19:41:02.563 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:41:02.576 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:41:02.578 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:41:02.588 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:41:02.594 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 19:41:02.596 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:41:02.598 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:41:02.612 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:41:02.614 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 19:41:02.615 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:41:02.626 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:41:02.627 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:41:02.628 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:41:02.638 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:41:02.643 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:41:02.644 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 19:41:02.647 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:41:02.649 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:41:02.657 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:41:02.658 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 19:41:02.659 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:41:02.672 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:41:02.680 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:41:02.689 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:41:02.691 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2025-04-25 19:41:02.693 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:41:02.696 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (3ms).
2025-04-25 19:41:02.698 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:41:02.704 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:41:02.707 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:41:02.708 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 19:41:02.710 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:41:02.711 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:41:02.713 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:41:02.715 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:41:02.720 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 5ms reading results.
2025-04-25 19:41:02.724 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:41:02.726 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:41:02.727 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:41:02.728 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:41:02.729 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:41:02.735 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-04-25 19:41:02.739 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-04-25 19:41:02.742 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:41:02.745 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:41:02.747 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:41:02.748 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:41:02.757 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:41:02.760 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 13ms reading results.
2025-04-25 19:41:02.764 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:41:02.769 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (5ms).
2025-04-25 19:41:02.775 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 19:41:02.778 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 19:41:02.779 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 19:41:02.780 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 19:41:02.787 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 19:41:02.791 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 194.4058ms
2025-04-25 19:41:02.792 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:41:02.793 +08:00 [DBG] Connection id "0HNC3TKVN75GA" completed keep alive response.
2025-04-25 19:41:02.795 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:41:02.797 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:41:02.798 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:41:02.806 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 407.5522ms
2025-04-25 19:41:20.896 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinteres - null null
2025-04-25 19:41:20.900 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:41:20.904 +08:00 [DBG] No candidates found for the request path '/api/cities/2/pointsofinteres'
2025-04-25 19:41:20.906 +08:00 [DBG] Request did not match any endpoints
2025-04-25 19:41:20.910 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 19:41:20.925 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 19:41:20.926 +08:00 [DBG] Connection id "0HNC3TKVN75GA" completed keep alive response.
2025-04-25 19:41:20.927 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinteres - 404 0 null 31.65ms
2025-04-25 19:41:20.938 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5212/api/cities/2/pointsofinteres, Response status code: 404
2025-04-25 19:41:29.282 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinteres/1 - null null
2025-04-25 19:41:29.288 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:41:29.314 +08:00 [DBG] No candidates found for the request path '/api/cities/2/pointsofinteres/1'
2025-04-25 19:41:29.328 +08:00 [DBG] Request did not match any endpoints
2025-04-25 19:41:29.337 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 19:41:29.396 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 19:41:29.413 +08:00 [DBG] Connection id "0HNC3TKVN75GA" completed keep alive response.
2025-04-25 19:41:29.414 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinteres/1 - 404 0 null 131.8221ms
2025-04-25 19:41:29.424 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5212/api/cities/2/pointsofinteres/1, Response status code: 404
2025-04-25 19:41:56.784 +08:00 [DBG] Connection id "0HNC3TKVN75G8" disconnecting.
2025-04-25 19:41:56.786 +08:00 [DBG] Connection id "0HNC3TKVN75G8" stopped.
2025-04-25 19:41:56.789 +08:00 [DBG] Connection id "0HNC3TKVN75G8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:43:39.678 +08:00 [DBG] Connection id "0HNC3TKVN75GA" disconnecting.
2025-04-25 19:43:39.686 +08:00 [DBG] Connection id "0HNC3TKVN75GA" stopped.
2025-04-25 19:43:39.948 +08:00 [DBG] Connection id "0HNC3TKVN75GA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:43:52.454 +08:00 [DBG] Connection id "0HNC3TKVN75GB" received FIN.
2025-04-25 19:43:53.054 +08:00 [DBG] Connection id "0HNC3TKVN75GB" accepted.
2025-04-25 19:43:53.104 +08:00 [DBG] Connection id "0HNC3TKVN75GB" started.
2025-04-25 19:43:53.105 +08:00 [DBG] Connection id "0HNC3TKVN75GC" accepted.
2025-04-25 19:43:53.114 +08:00 [DBG] Connection id "0HNC3TKVN75GB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:43:53.116 +08:00 [DBG] Connection id "0HNC3TKVN75GC" started.
2025-04-25 19:43:53.117 +08:00 [DBG] Connection id "0HNC3TKVN75GB" disconnecting.
2025-04-25 19:43:53.118 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinteres/1 - null null
2025-04-25 19:43:53.119 +08:00 [DBG] Connection id "0HNC3TKVN75GB" stopped.
2025-04-25 19:43:53.121 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:43:53.127 +08:00 [DBG] No candidates found for the request path '/api/cities/2/pointsofinteres/1'
2025-04-25 19:43:53.128 +08:00 [DBG] Request did not match any endpoints
2025-04-25 19:43:53.135 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:43:53.154 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:43:53.156 +08:00 [DBG] Connection id "0HNC3TKVN75GC" completed keep alive response.
2025-04-25 19:43:53.170 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinteres/1 - 404 0 null 52.1048ms
2025-04-25 19:43:53.216 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5212/api/cities/2/pointsofinteres/1, Response status code: 404
2025-04-25 19:43:58.768 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinteres - null null
2025-04-25 19:43:58.804 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:43:58.819 +08:00 [DBG] No candidates found for the request path '/api/cities/2/pointsofinteres'
2025-04-25 19:43:58.820 +08:00 [DBG] Request did not match any endpoints
2025-04-25 19:43:58.836 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:43:58.837 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:43:58.844 +08:00 [DBG] Connection id "0HNC3TKVN75GC" completed keep alive response.
2025-04-25 19:43:58.897 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinteres - 404 0 null 128.2635ms
2025-04-25 19:43:58.900 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5212/api/cities/2/pointsofinteres, Response status code: 404
2025-04-25 19:44:07.935 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinteres - null null
2025-04-25 19:44:07.951 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:44:08.018 +08:00 [DBG] No candidates found for the request path '/api/cities/2/pointsofinteres'
2025-04-25 19:44:08.020 +08:00 [DBG] Request did not match any endpoints
2025-04-25 19:44:08.050 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:44:08.053 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:44:08.079 +08:00 [DBG] Connection id "0HNC3TKVN75GC" completed keep alive response.
2025-04-25 19:44:08.088 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinteres - 404 0 null 153.6789ms
2025-04-25 19:44:08.117 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5212/api/cities/2/pointsofinteres, Response status code: 404
2025-04-25 19:44:14.321 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 19:44:14.330 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:44:14.336 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 19:44:14.337 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 19:44:14.347 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 19:44:14.349 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:44:14.350 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:44:14.351 +08:00 [DBG] Authorization was successful.
2025-04-25 19:44:14.353 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 19:44:14.357 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 19:44:14.366 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:44:14.369 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:44:14.380 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:44:14.384 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:44:14.386 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 19:44:14.388 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 19:44:14.403 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 19:44:14.429 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 19:44:14.435 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 19:44:14.436 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 19:44:14.438 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 19:44:14.449 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 19:44:14.450 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 19:44:14.452 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 19:44:14.454 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 19:44:14.468 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 19:44:14.479 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 19:44:14.481 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 19:44:14.483 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 19:44:14.484 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 19:44:14.485 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 19:44:14.486 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 19:44:14.498 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 19:44:14.500 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 19:44:14.503 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 19:44:14.504 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 19:44:14.514 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 19:44:14.515 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 19:44:14.516 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 19:44:14.517 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 19:44:14.518 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 19:44:14.520 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 19:44:14.521 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 19:44:14.531 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 19:44:14.534 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 19:44:14.536 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:44:14.541 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:44:14.549 +08:00 [DBG] Created DbConnection. (7ms).
2025-04-25 19:44:14.550 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:44:14.552 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:14.554 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:44:14.554 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 19:44:14.563 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-04-25 19:44:14.564 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 19:44:14.565 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 19:44:14.567 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:14.568 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 19:44:14.570 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:14.577 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (6ms).
2025-04-25 19:44:14.580 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:44:14.583 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:14.586 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:44:14.595 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2025-04-25 19:44:14.597 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-04-25 19:44:14.598 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 19:44:14.601 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 19:44:14.618 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:44:14.621 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:44:14.634 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:44:14.635 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:44:14.637 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:44:14.638 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:44:14.646 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:44:14.648 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:44:14.650 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:44:14.651 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:44:14.653 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:14.654 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 35ms reading results.
2025-04-25 19:44:14.660 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:14.679 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (18ms).
2025-04-25 19:44:14.682 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 19:44:14.684 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 19:44:14.685 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 19:44:14.686 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 19:44:14.686 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 19:44:14.696 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 19:44:14.700 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 311.8917ms
2025-04-25 19:44:14.701 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 19:44:14.708 +08:00 [DBG] Connection id "0HNC3TKVN75GC" completed keep alive response.
2025-04-25 19:44:14.717 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:44:14.719 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:44:14.726 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (6ms).
2025-04-25 19:44:14.738 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 416.6938ms
2025-04-25 19:44:42.080 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 19:44:42.083 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:44:42.084 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:44:42.085 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:44:42.089 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:44:42.090 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:44:42.091 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:44:42.096 +08:00 [DBG] Authorization was successful.
2025-04-25 19:44:42.098 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:44:42.099 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 19:44:42.101 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:44:42.103 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:44:42.106 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:44:42.116 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:44:42.117 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 19:44:42.119 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:44:42.133 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:44:42.134 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:44:42.135 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 19:44:42.141 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:44:42.146 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:44:42.148 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:44:42.151 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:44:42.156 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:44:42.159 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:44:42.159 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 19:44:42.160 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:44:42.166 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:42.167 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:44:42.168 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 19:44:42.169 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-25 19:44:42.178 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:44:42.181 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:44:42.186 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:42.199 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 14ms reading results.
2025-04-25 19:44:42.201 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:42.203 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:44:42.207 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:44:42.208 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:42.211 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:44:42.213 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:44:42.216 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-04-25 19:44:42.218 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:44:42.220 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:44:42.230 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:42.233 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2025-04-25 19:44:42.245 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:42.246 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:44:42.249 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:44:42.250 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:42.251 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:44:42.252 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 19:44:42.253 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:44:42.259 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:44:42.268 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:44:42.269 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:44:42.283 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:44:42.285 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:42.286 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 16ms reading results.
2025-04-25 19:44:42.288 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:44:42.290 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 19:44:42.293 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 19:44:42.296 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 19:44:42.296 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 19:44:42.309 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 19:44:42.316 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 19:44:42.317 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 198.2217ms
2025-04-25 19:44:42.319 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:44:42.327 +08:00 [DBG] Connection id "0HNC3TKVN75GC" completed keep alive response.
2025-04-25 19:44:42.328 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:44:42.368 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:44:42.369 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:44:42.378 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 297.6042ms
2025-04-25 19:45:47.235 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-25 19:45:47.531 +08:00 [DBG] Hosting starting
2025-04-25 19:45:47.553 +08:00 [INF] User profile is available. Using 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-25 19:45:47.581 +08:00 [DBG] Reading data from file 'C:\Users\aisur\AppData\Local\ASP.NET\DataProtection-Keys\key-921e173d-5e38-48fb-a73b-0d9c13e74309.xml'.
2025-04-25 19:45:47.611 +08:00 [DBG] Found key {921e173d-5e38-48fb-a73b-0d9c13e74309}.
2025-04-25 19:45:47.647 +08:00 [DBG] Considering key {921e173d-5e38-48fb-a73b-0d9c13e74309} with expiration date 2025-07-23 09:56:55Z as default key.
2025-04-25 19:45:47.709 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 19:45:47.725 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-25 19:45:47.734 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-25 19:45:47.760 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-25 19:45:47.768 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-25 19:45:47.776 +08:00 [DBG] Using key {921e173d-5e38-48fb-a73b-0d9c13e74309} as the default key.
2025-04-25 19:45:47.779 +08:00 [DBG] Key ring with default key {921e173d-5e38-48fb-a73b-0d9c13e74309} was loaded during application startup.
2025-04-25 19:45:47.896 +08:00 [INF] Now listening on: http://localhost:5212
2025-04-25 19:45:47.902 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2025-04-25 19:45:47.911 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-25 19:45:47.938 +08:00 [INF] Hosting environment: Development
2025-04-25 19:45:47.946 +08:00 [INF] Content root path: C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API
2025-04-25 19:45:47.952 +08:00 [DBG] Hosting started
2025-04-25 19:46:27.169 +08:00 [DBG] Connection id "0HNC3TR802FK5" received FIN.
2025-04-25 19:46:27.179 +08:00 [DBG] Connection id "0HNC3TR802FK5" accepted.
2025-04-25 19:46:27.180 +08:00 [DBG] Connection id "0HNC3TR802FK5" started.
2025-04-25 19:46:27.197 +08:00 [DBG] Connection id "0HNC3TR802FK6" accepted.
2025-04-25 19:46:27.211 +08:00 [DBG] Connection id "0HNC3TR802FK6" started.
2025-04-25 19:46:27.226 +08:00 [DBG] Connection id "0HNC3TR802FK5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:46:27.246 +08:00 [DBG] Connection id "0HNC3TR802FK5" disconnecting.
2025-04-25 19:46:27.255 +08:00 [DBG] Connection id "0HNC3TR802FK5" stopped.
2025-04-25 19:46:27.327 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 19:46:27.331 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 19:46:27.379 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:46:27.388 +08:00 [WRN] Failed to determine the https port for redirect.
2025-04-25 19:46:27.425 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:46:27.440 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:46:27.445 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:46:27.612 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:46:27.619 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:46:27.630 +08:00 [DBG] Authorization was successful.
2025-04-25 19:46:27.641 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:46:27.704 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 19:46:27.709 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:46:27.710 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:46:27.713 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:46:27.723 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:46:27.724 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 19:46:27.727 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:46:27.892 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-25 19:46:28.121 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:46:28.126 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:46:28.129 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 19:46:28.138 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:46:28.140 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:46:28.141 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:46:28.145 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:46:29.045 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:46:29.195 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2025-04-25 19:46:29.654 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1)), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 19:46:29.742 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:46:29.764 +08:00 [DBG] Created DbConnection. (20ms).
2025-04-25 19:46:29.775 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:46:29.797 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:46:29.810 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:46:29.822 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-04-25 19:46:29.843 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (25ms).
2025-04-25 19:46:29.884 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:46:29.955 +08:00 [INF] Executed DbCommand (82ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:46:29.968 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:46:29.978 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 14ms reading results.
2025-04-25 19:46:29.993 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:46:30.006 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (5ms).
2025-04-25 19:46:30.010 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 19:46:30.024 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 19:46:30.046 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 2303.1301ms
2025-04-25 19:46:30.060 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:46:30.073 +08:00 [DBG] Connection id "0HNC3TR802FK6" completed keep alive response.
2025-04-25 19:46:30.087 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:46:30.096 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:46:30.120 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (23ms).
2025-04-25 19:46:30.125 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 2800.6285ms
2025-04-25 19:46:43.029 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 19:46:43.310 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 19:48:41.117 +08:00 [DBG] Connection id "0HNC3TR802FK6" disconnecting.
2025-04-25 19:48:41.131 +08:00 [DBG] Connection id "0HNC3TR802FK6" stopped.
2025-04-25 19:48:41.151 +08:00 [DBG] Connection id "0HNC3TR802FK6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:50:23.730 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 19:50:24.026 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 19:50:44.646 +08:00 [DBG] Connection id "0HNC3TR802FK7" accepted.
2025-04-25 19:50:44.647 +08:00 [DBG] Connection id "0HNC3TR802FK7" received FIN.
2025-04-25 19:50:44.649 +08:00 [DBG] Connection id "0HNC3TR802FK7" started.
2025-04-25 19:50:44.649 +08:00 [DBG] Connection id "0HNC3TR802FK8" accepted.
2025-04-25 19:50:44.651 +08:00 [DBG] Connection id "0HNC3TR802FK7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:50:44.655 +08:00 [DBG] Connection id "0HNC3TR802FK8" started.
2025-04-25 19:50:44.656 +08:00 [DBG] Connection id "0HNC3TR802FK7" disconnecting.
2025-04-25 19:50:44.660 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 19:50:44.660 +08:00 [DBG] Connection id "0HNC3TR802FK7" stopped.
2025-04-25 19:50:44.664 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 19:50:44.669 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:50:44.671 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 19:50:44.673 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 19:50:44.676 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 19:50:44.690 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 19:50:44.719 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 19:50:44.724 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 19:50:44.727 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 19:50:44.732 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 19:50:44.736 +08:00 [DBG] Connection id "0HNC3TR802FK8" completed keep alive response.
2025-04-25 19:50:44.737 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 401 0 null 77.4209ms
2025-04-25 19:50:55.096 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 19:50:55.102 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:50:55.107 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 19:50:55.110 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 19:50:55.112 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 19:50:55.119 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 19:50:55.127 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 19:50:55.132 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 19:50:55.142 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 19:50:55.146 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 19:50:55.147 +08:00 [DBG] Connection id "0HNC3TR802FK8" completed keep alive response.
2025-04-25 19:50:55.149 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 401 0 null 52.4294ms
2025-04-25 19:51:47.307 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 19:51:47.611 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 19:51:56.927 +08:00 [DBG] Connection id "0HNC3TR802FK9" accepted.
2025-04-25 19:51:56.931 +08:00 [DBG] Connection id "0HNC3TR802FK9" received FIN.
2025-04-25 19:51:56.932 +08:00 [DBG] Connection id "0HNC3TR802FKA" accepted.
2025-04-25 19:51:56.934 +08:00 [DBG] Connection id "0HNC3TR802FKA" started.
2025-04-25 19:51:56.937 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities - null null
2025-04-25 19:51:56.941 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 19:51:56.932 +08:00 [DBG] Connection id "0HNC3TR802FK9" started.
2025-04-25 19:51:56.942 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:51:56.944 +08:00 [DBG] Connection id "0HNC3TR802FK9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:51:56.946 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 19:51:56.949 +08:00 [DBG] Connection id "0HNC3TR802FK9" disconnecting.
2025-04-25 19:51:56.951 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 19:51:56.954 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 19:51:56.952 +08:00 [DBG] Connection id "0HNC3TR802FK9" stopped.
2025-04-25 19:51:56.956 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:51:56.959 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:51:56.960 +08:00 [DBG] Authorization was successful.
2025-04-25 19:51:56.961 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 19:51:56.978 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 19:51:56.982 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:51:56.983 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:51:56.988 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:51:56.989 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:51:56.991 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 19:51:56.992 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 19:51:56.996 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 19:51:56.998 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 19:51:57.001 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 19:51:57.004 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 19:51:57.005 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 19:51:57.006 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 19:51:57.007 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 19:51:57.009 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 19:51:57.010 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 19:51:57.011 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 19:51:57.012 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 19:51:57.015 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 19:51:57.016 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 19:51:57.018 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 19:51:57.020 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 19:51:57.021 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 19:51:57.023 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2025-04-25 19:51:57.029 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 19:51:57.032 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 19:51:57.035 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 19:51:57.037 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 19:51:57.038 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 19:51:57.039 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 19:51:57.040 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2025-04-25 19:51:57.041 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2025-04-25 19:51:57.042 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 19:51:57.043 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 19:51:57.046 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 19:51:57.049 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 19:51:57.080 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:51:57.088 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2025-04-25 19:51:57.116 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0);
            return (int)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 19:51:57.129 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:51:57.130 +08:00 [DBG] Created DbConnection. (1ms).
2025-04-25 19:51:57.132 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:51:57.135 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:51:57.137 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:51:57.138 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 19:51:57.139 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:51:57.141 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 19:51:57.148 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 19:51:57.151 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:51:57.153 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2025-04-25 19:51:57.155 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:51:57.158 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (3ms).
2025-04-25 19:51:57.168 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Id)
    .Skip(__p_0)
    .Take(__p_1)'
2025-04-25 19:51:57.247 +08:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<City>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Id ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        City entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            City instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(City);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: City.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (City)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")]: 
                        {
                            return 
                            {
                                City instance;
                                instance = new City(dataReader.GetString(2));
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: City | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.City")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(City)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: CityInfo.API.DbContexts.CityInfoContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-25 19:51:57.278 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:51:57.282 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:51:57.283 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:51:57.287 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-04-25 19:51:57.289 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-04-25 19:51:57.290 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 19:51:57.293 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 19:51:57.342 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:51:57.376 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:51:57.378 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:51:57.381 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:51:57.383 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:51:57.390 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:51:57.391 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:51:57.393 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:51:57.396 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:51:57.399 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:51:57.409 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:51:57.428 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 128ms reading results.
2025-04-25 19:51:57.442 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:51:57.458 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (15ms).
2025-04-25 19:51:57.607 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 19:51:57.645 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 19:51:57.659 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-04-25 19:51:57.660 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-04-25 19:51:57.671 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 19:51:57.707 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 19:51:58.278 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 1285.9848ms
2025-04-25 19:51:58.322 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 19:51:58.445 +08:00 [DBG] Connection id "0HNC3TR802FKA" completed keep alive response.
2025-04-25 19:51:59.136 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:51:59.212 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:51:59.257 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (45ms).
2025-04-25 19:51:59.259 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities - 200 838 application/json; charset=utf-8 2322.6519ms
2025-04-25 19:52:18.696 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 19:52:18.707 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:52:18.709 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:52:18.711 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:52:18.721 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:52:18.723 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:52:18.726 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:52:18.728 +08:00 [DBG] Authorization was successful.
2025-04-25 19:52:18.731 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:52:18.736 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 19:52:18.739 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:52:18.740 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:52:18.742 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:52:18.748 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:52:18.752 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 19:52:18.757 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:52:18.772 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:52:18.774 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:52:18.776 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 19:52:18.777 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:52:18.782 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:52:18.785 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:52:18.787 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:52:18.901 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:52:18.907 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:52:18.908 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 19:52:18.909 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:52:18.910 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:18.912 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:52:18.913 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 19:52:18.917 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-04-25 19:52:18.919 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:52:18.920 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:52:18.922 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:18.923 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 19:52:18.926 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:18.927 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:52:18.931 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2025-04-25 19:52:18.938 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: CityInfo.API.DbContexts.CityInfoContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-25 19:52:18.942 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:52:18.944 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:18.950 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:52:18.952 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 19:52:18.953 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:52:18.954 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:52:18.957 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:52:18.958 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:18.959 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 0ms reading results.
2025-04-25 19:52:18.960 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:18.965 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (4ms).
2025-04-25 19:52:18.971 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2025-04-25 19:52:18.982 +08:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<PointOfInterest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        PointOfInterest entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            PointOfInterest instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(PointOfInterest);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: PointOfInterest.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (PointOfInterest)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: PointOfInterest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: PointOfInterest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest")]: 
                        {
                            return 
                            {
                                PointOfInterest instance;
                                instance = new PointOfInterest(dataReader.GetString(3));
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CityId>k__BackingField = dataReader.GetInt32(1);
                                instance.<Description>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: PointOfInterest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("CityInfo.API.Entities.PointOfInterest")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(PointOfInterest)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: CityInfo.API.DbContexts.CityInfoContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-04-25 19:52:18.989 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:52:18.990 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:18.991 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:52:18.992 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 19:52:18.993 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:52:18.997 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:52:19.003 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:52:19.008 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:52:19.022 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:52:19.025 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:19.026 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 21ms reading results.
2025-04-25 19:52:19.029 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:19.031 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 19:52:19.038 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 19:52:19.040 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 19:52:19.041 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 19:52:19.043 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 19:52:19.045 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 19:52:19.053 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 296.6354ms
2025-04-25 19:52:19.056 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:52:19.057 +08:00 [DBG] Connection id "0HNC3TR802FKA" completed keep alive response.
2025-04-25 19:52:19.058 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:52:19.060 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:52:19.066 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (6ms).
2025-04-25 19:52:19.070 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 373.9679ms
2025-04-25 19:52:24.670 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 19:52:24.672 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:52:24.672 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:52:24.673 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:52:24.675 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:52:24.677 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:52:24.678 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:52:24.679 +08:00 [DBG] Authorization was successful.
2025-04-25 19:52:24.680 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:52:24.681 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 19:52:24.685 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:52:24.687 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:52:24.688 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:52:24.690 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:52:24.692 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 19:52:24.693 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:52:24.697 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:52:24.698 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:52:24.700 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 19:52:24.702 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:52:24.707 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:52:24.713 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:52:24.726 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:52:24.731 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:52:24.735 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:52:24.737 +08:00 [DBG] Created DbConnection. (1ms).
2025-04-25 19:52:24.738 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:52:24.739 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:24.740 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:52:24.741 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 19:52:24.742 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:52:24.743 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:52:24.747 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:52:24.749 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:24.751 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2025-04-25 19:52:24.753 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:24.754 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:52:24.757 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 19:52:24.758 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 19:52:24.758 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 65.3769ms
2025-04-25 19:52:24.759 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:52:24.760 +08:00 [DBG] Connection id "0HNC3TR802FKA" completed keep alive response.
2025-04-25 19:52:24.762 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:52:24.766 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:52:24.768 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:52:24.772 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 102.077ms
2025-04-25 19:52:35.892 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 19:52:35.897 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:52:35.900 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:52:35.901 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:52:35.907 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:52:35.912 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenException: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.DecryptToken(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWEAsync(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 19:52:35.920 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
2025-04-25 19:52:35.921 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 19:52:35.922 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 19:52:35.923 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 19:52:35.926 +08:00 [DBG] Connection id "0HNC3TR802FKA" completed keep alive response.
2025-04-25 19:52:35.929 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 401 0 null 36.9684ms
2025-04-25 19:52:43.222 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 19:52:43.238 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:52:43.243 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:52:43.252 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:52:43.255 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:52:43.257 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:52:43.259 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:52:43.269 +08:00 [DBG] Authorization was successful.
2025-04-25 19:52:43.273 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:52:43.276 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 19:52:43.285 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:52:43.287 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:52:43.289 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:52:43.291 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:52:43.292 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 19:52:43.302 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:52:43.307 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:52:43.308 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:52:43.312 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 19:52:43.318 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:52:43.320 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:52:43.321 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:52:43.322 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:52:43.325 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:52:43.332 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:52:43.333 +08:00 [DBG] Created DbConnection. (1ms).
2025-04-25 19:52:43.335 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:52:43.337 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:43.338 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:52:43.339 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 19:52:43.340 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:52:43.341 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:52:43.352 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:52:43.357 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:43.358 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 19:52:43.360 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:52:43.363 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 19:52:43.367 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 19:52:43.368 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 19:52:43.369 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 67.2183ms
2025-04-25 19:52:43.370 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:52:43.372 +08:00 [DBG] Connection id "0HNC3TR802FKA" completed keep alive response.
2025-04-25 19:52:43.373 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:52:43.380 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:52:43.382 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:52:43.384 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 161.3253ms
2025-04-25 19:53:02.167 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 19:53:03.140 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:53:03.208 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:53:03.220 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:53:03.236 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:53:03.240 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:53:03.241 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:53:03.252 +08:00 [DBG] Authorization was successful.
2025-04-25 19:53:03.254 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:53:03.255 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 19:53:03.257 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:53:03.266 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:53:03.268 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:53:03.270 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:53:03.272 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 19:53:03.275 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:53:03.277 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:53:03.285 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:53:03.288 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 19:53:03.292 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:53:03.299 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:53:03.301 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:53:03.303 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:53:03.309 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:53:03.320 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:53:03.322 +08:00 [DBG] Created DbConnection. (1ms).
2025-04-25 19:53:03.323 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:53:03.331 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:53:03.335 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:53:03.337 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 19:53:03.340 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-25 19:53:03.342 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:53:03.355 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:53:03.362 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:53:03.365 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 3ms reading results.
2025-04-25 19:53:03.370 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:53:03.372 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 19:53:03.382 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:53:03.388 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:53:03.391 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:53:03.398 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-04-25 19:53:03.401 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-04-25 19:53:03.403 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:53:03.407 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:53:03.417 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:53:03.419 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2025-04-25 19:53:03.420 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:53:03.422 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:53:03.425 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:53:03.433 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:53:03.436 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:53:03.438 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 19:53:03.439 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:53:03.440 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:53:03.447 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:53:03.450 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:53:03.452 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:53:03.453 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:53:03.456 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 6ms reading results.
2025-04-25 19:53:03.457 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:53:03.458 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:53:03.466 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 19:53:03.469 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 19:53:03.469 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 19:53:03.470 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 19:53:03.471 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 19:53:03.472 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 197.501ms
2025-04-25 19:53:03.482 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:53:03.483 +08:00 [DBG] Connection id "0HNC3TR802FKA" completed keep alive response.
2025-04-25 19:53:03.486 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:53:03.488 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:53:03.488 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2025-04-25 19:53:03.490 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 1323.1235ms
2025-04-25 19:53:05.695 +08:00 [DBG] Connection id "0HNC3TR802FK8" disconnecting.
2025-04-25 19:53:05.698 +08:00 [DBG] Connection id "0HNC3TR802FK8" stopped.
2025-04-25 19:53:05.700 +08:00 [DBG] Connection id "0HNC3TR802FK8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:55:11.521 +08:00 [DBG] Connection id "0HNC3TR802FKB" accepted.
2025-04-25 19:55:11.523 +08:00 [DBG] Connection id "0HNC3TR802FKB" received FIN.
2025-04-25 19:55:11.529 +08:00 [DBG] Connection id "0HNC3TR802FKB" started.
2025-04-25 19:55:11.529 +08:00 [DBG] Connection id "0HNC3TR802FKC" accepted.
2025-04-25 19:55:11.532 +08:00 [DBG] Connection id "0HNC3TR802FKB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:55:11.533 +08:00 [DBG] Connection id "0HNC3TR802FKC" started.
2025-04-25 19:55:11.534 +08:00 [DBG] Connection id "0HNC3TR802FKB" disconnecting.
2025-04-25 19:55:11.536 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 19:55:11.537 +08:00 [DBG] Connection id "0HNC3TR802FKB" stopped.
2025-04-25 19:55:11.540 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:55:11.542 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:55:11.546 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:55:11.547 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:55:11.549 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 19:55:11.552 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 19:55:11.553 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 19:55:11.554 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 19:55:11.557 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 19:55:11.557 +08:00 [DBG] Connection id "0HNC3TR802FKC" completed keep alive response.
2025-04-25 19:55:11.562 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 401 0 null 25.2805ms
2025-04-25 19:55:13.748 +08:00 [DBG] Connection id "0HNC3TR802FKA" disconnecting.
2025-04-25 19:55:13.750 +08:00 [DBG] Connection id "0HNC3TR802FKA" stopped.
2025-04-25 19:55:13.751 +08:00 [DBG] Connection id "0HNC3TR802FKA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:56:05.612 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 19:56:05.614 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:56:05.616 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:56:05.618 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:56:05.623 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:56:05.628 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 19:56:05.682 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 19:56:05.710 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 19:56:05.713 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 19:56:05.729 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 19:56:05.731 +08:00 [DBG] Connection id "0HNC3TR802FKC" completed keep alive response.
2025-04-25 19:56:05.757 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 401 0 null 145.2258ms
2025-04-25 19:56:13.022 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 19:56:13.025 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:56:13.030 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:56:13.037 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:56:13.039 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:56:13.040 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:56:13.041 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:56:13.043 +08:00 [DBG] Authorization was successful.
2025-04-25 19:56:13.044 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:56:13.046 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 19:56:13.048 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:56:13.049 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:56:13.052 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:56:13.056 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:56:13.058 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 19:56:13.061 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:56:13.062 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:56:13.064 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:56:13.068 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 19:56:13.070 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:56:13.071 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:56:13.072 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:56:13.073 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:56:13.077 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:56:13.079 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:56:13.080 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 19:56:13.081 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:56:13.083 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:13.088 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:56:13.090 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:56:13.092 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 19:56:13.093 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:56:13.096 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:56:13.098 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:13.100 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 19:56:13.101 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:13.104 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 19:56:13.107 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 19:56:13.109 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 19:56:13.110 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 49.5214ms
2025-04-25 19:56:13.111 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:56:13.112 +08:00 [DBG] Connection id "0HNC3TR802FKC" completed keep alive response.
2025-04-25 19:56:13.113 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:56:13.113 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:56:13.118 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (4ms).
2025-04-25 19:56:13.120 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 98.5175ms
2025-04-25 19:56:18.278 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 19:56:18.281 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:56:18.282 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:56:18.284 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:56:18.287 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:56:18.289 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:56:18.290 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:56:18.291 +08:00 [DBG] Authorization was successful.
2025-04-25 19:56:18.293 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:56:18.294 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 19:56:18.295 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:56:18.297 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:56:18.298 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:56:18.301 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:56:18.302 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 19:56:18.304 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:56:18.306 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:56:18.310 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:56:18.311 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 19:56:18.312 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:56:18.313 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:56:18.314 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:56:18.317 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:56:18.320 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:56:18.327 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:56:18.327 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 19:56:18.328 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:56:18.329 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:18.330 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:56:18.331 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 19:56:18.333 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:56:18.335 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:56:18.337 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:56:18.340 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:18.341 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 19:56:18.342 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:18.343 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2025-04-25 19:56:18.344 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:56:18.346 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:18.347 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:56:18.350 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:56:18.351 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 19:56:18.353 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:56:18.363 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:56:18.373 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:18.376 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 4ms reading results.
2025-04-25 19:56:18.377 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:18.378 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2025-04-25 19:56:18.381 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:56:18.382 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:18.384 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:56:18.385 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 19:56:18.388 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-25 19:56:18.390 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:56:18.391 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:56:18.393 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:56:18.394 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:56:18.398 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:18.400 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 7ms reading results.
2025-04-25 19:56:18.404 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:18.407 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 19:56:18.409 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 19:56:18.412 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 19:56:18.413 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 19:56:18.417 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 19:56:18.419 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 19:56:18.421 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 117.6127ms
2025-04-25 19:56:18.439 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:56:18.440 +08:00 [DBG] Connection id "0HNC3TR802FKC" completed keep alive response.
2025-04-25 19:56:18.441 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:56:18.443 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:56:18.445 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 19:56:18.456 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 177.6952ms
2025-04-25 19:56:24.600 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 19:56:24.609 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:56:24.612 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:56:24.614 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:56:24.618 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:56:24.622 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:56:24.623 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:56:24.624 +08:00 [DBG] Authorization was successful.
2025-04-25 19:56:24.628 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:56:24.629 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 19:56:24.634 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:56:24.638 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:56:24.639 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:56:24.642 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:56:24.644 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 19:56:24.646 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:56:24.650 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:56:24.652 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:56:24.654 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 19:56:24.657 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:56:24.659 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:56:24.660 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:56:24.662 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:56:24.663 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:56:24.667 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:56:24.668 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 19:56:24.669 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:56:24.671 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:24.672 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:56:24.674 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-25 19:56:24.675 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 19:56:24.677 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:56:24.679 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:56:24.682 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:24.684 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 19:56:24.688 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:24.689 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:56:24.691 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 19:56:24.692 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 19:56:24.693 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 46.5827ms
2025-04-25 19:56:24.694 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:56:24.695 +08:00 [DBG] Connection id "0HNC3TR802FKC" completed keep alive response.
2025-04-25 19:56:24.696 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:56:24.702 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:56:24.703 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:56:24.710 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 110.6629ms
2025-04-25 19:56:34.459 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 19:56:34.463 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:56:34.471 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:56:34.473 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:56:34.478 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:56:34.480 +08:00 [DBG] Successfully validated the token.
2025-04-25 19:56:34.489 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 19:56:34.492 +08:00 [DBG] Authorization was successful.
2025-04-25 19:56:34.493 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:56:34.494 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 19:56:34.497 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 19:56:34.501 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 19:56:34.502 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 19:56:34.512 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 19:56:34.513 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 19:56:34.528 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:56:34.529 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 19:56:34.533 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:56:34.536 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 19:56:34.539 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:56:34.541 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:56:34.542 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 19:56:34.543 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 19:56:34.546 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 19:56:34.552 +08:00 [DBG] Creating DbConnection.
2025-04-25 19:56:34.554 +08:00 [DBG] Created DbConnection. (1ms).
2025-04-25 19:56:34.558 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:56:34.560 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:34.562 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:56:34.563 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 19:56:34.568 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-04-25 19:56:34.571 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:56:34.574 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 19:56:34.578 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:34.579 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 19:56:34.589 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:34.591 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:56:34.592 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:56:34.593 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:34.599 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:56:34.603 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-25 19:56:34.606 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-04-25 19:56:34.608 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:56:34.609 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 19:56:34.612 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:34.613 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 19:56:34.616 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:34.618 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:56:34.622 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:56:34.624 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:34.625 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 19:56:34.629 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-25 19:56:34.630 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-25 19:56:34.638 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:56:34.640 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 19:56:34.644 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:56:34.646 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 19:56:34.649 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:34.653 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 10ms reading results.
2025-04-25 19:56:34.657 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 19:56:34.658 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:56:34.660 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 19:56:34.663 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 19:56:34.671 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 19:56:34.676 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 19:56:34.677 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 19:56:34.679 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 150.8608ms
2025-04-25 19:56:34.684 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:56:34.689 +08:00 [DBG] Connection id "0HNC3TR802FKC" completed keep alive response.
2025-04-25 19:56:34.690 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 19:56:34.702 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 19:56:34.704 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 19:56:34.712 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 253.022ms
2025-04-25 19:58:18.565 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 19:58:18.830 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 19:58:34.681 +08:00 [DBG] Connection id "0HNC3TR802FKD" received FIN.
2025-04-25 19:58:34.699 +08:00 [DBG] Connection id "0HNC3TR802FKD" accepted.
2025-04-25 19:58:34.710 +08:00 [DBG] Connection id "0HNC3TR802FKD" started.
2025-04-25 19:58:34.710 +08:00 [DBG] Connection id "0HNC3TR802FKE" accepted.
2025-04-25 19:58:34.720 +08:00 [DBG] Connection id "0HNC3TR802FKD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:58:34.722 +08:00 [DBG] Connection id "0HNC3TR802FKE" started.
2025-04-25 19:58:34.723 +08:00 [DBG] Connection id "0HNC3TR802FKD" disconnecting.
2025-04-25 19:58:34.733 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 19:58:34.735 +08:00 [DBG] Connection id "0HNC3TR802FKD" stopped.
2025-04-25 19:58:34.738 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 19:58:34.745 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:58:34.751 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:58:34.753 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:58:34.761 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:58:34.765 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 19:58:34.771 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 19:58:34.774 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 19:58:34.780 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 19:58:34.781 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 19:58:34.782 +08:00 [DBG] Connection id "0HNC3TR802FKE" completed keep alive response.
2025-04-25 19:58:34.791 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 401 0 null 57.6654ms
2025-04-25 19:58:44.052 +08:00 [DBG] Connection id "0HNC3TR802FKF" accepted.
2025-04-25 19:58:45.559 +08:00 [DBG] Connection id "0HNC3TR802FKG" accepted.
2025-04-25 19:58:45.563 +08:00 [DBG] Connection id "0HNC3TR802FKF" started.
2025-04-25 19:58:45.870 +08:00 [DBG] Connection id "0HNC3TR802FKC" disconnecting.
2025-04-25 19:58:46.411 +08:00 [DBG] Connection id "0HNC3TR802FKG" started.
2025-04-25 19:58:46.452 +08:00 [DBG] Connection id "0HNC3TR802FKC" stopped.
2025-04-25 19:58:46.462 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/_framework/aspnetcore-browser-refresh.js - null null
2025-04-25 19:58:46.464 +08:00 [DBG] Connection id "0HNC3TR802FKC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:58:46.470 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:58:46.482 +08:00 [DBG] No candidates found for the request path '/_framework/aspnetcore-browser-refresh.js'
2025-04-25 19:58:46.814 +08:00 [DBG] Request did not match any endpoints
2025-04-25 19:58:46.816 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-25 19:58:46.864 +08:00 [DBG] Connection id "0HNC3TR802FKG" completed keep alive response.
2025-04-25 19:58:46.881 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/_framework/aspnetcore-browser-refresh.js - 404 0 null 418.7811ms
2025-04-25 19:58:46.889 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5212/_framework/aspnetcore-browser-refresh.js, Response status code: 404
2025-04-25 19:58:46.970 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/swagger/v1/swagger.json - null null
2025-04-25 19:58:47.584 +08:00 [DBG] Connection id "0HNC3TR802FKG" completed keep alive response.
2025-04-25 19:58:47.588 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 617.6796ms
2025-04-25 19:58:47.854 +08:00 [DBG] Connection id "0HNC3TR802FKF" received FIN.
2025-04-25 19:58:47.859 +08:00 [DBG] Connection id "0HNC3TR802FKG" received FIN.
2025-04-25 19:58:47.890 +08:00 [DBG] Connection id "0HNC3TR802FKF" disconnecting.
2025-04-25 19:58:47.897 +08:00 [DBG] Connection id "0HNC3TR802FKG" disconnecting.
2025-04-25 19:58:47.902 +08:00 [DBG] Connection id "0HNC3TR802FKF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:58:47.911 +08:00 [DBG] Connection id "0HNC3TR802FKG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 19:58:47.918 +08:00 [DBG] Connection id "0HNC3TR802FKF" stopped.
2025-04-25 19:58:47.934 +08:00 [DBG] Connection id "0HNC3TR802FKG" stopped.
2025-04-25 19:59:16.402 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 19:59:16.410 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:59:16.412 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:59:16.414 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 19:59:16.417 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:59:16.421 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 19:59:16.432 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 19:59:16.435 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 19:59:16.438 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 19:59:16.441 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 19:59:16.444 +08:00 [DBG] Connection id "0HNC3TR802FKE" completed keep alive response.
2025-04-25 19:59:16.453 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 401 0 null 50.8103ms
2025-04-25 19:59:35.782 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 19:59:35.874 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 19:59:35.885 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:59:35.932 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 19:59:35.935 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 19:59:35.964 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 19:59:35.989 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 19:59:35.992 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 19:59:35.994 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 19:59:35.997 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 19:59:35.999 +08:00 [DBG] Connection id "0HNC3TR802FKE" completed keep alive response.
2025-04-25 19:59:36.159 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 401 0 null 377.2589ms
2025-04-25 20:00:11.332 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:00:11.664 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:00:11.672 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:00:11.680 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:00:11.698 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:00:11.702 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:00:11.711 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:00:11.714 +08:00 [DBG] Authorization was successful.
2025-04-25 20:00:11.718 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:00:11.729 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:00:11.733 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:00:11.738 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:00:11.742 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:00:11.745 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:00:11.750 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:00:11.762 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:00:11.765 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:00:11.773 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:00:11.775 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:00:11.779 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:00:11.781 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:00:11.782 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:00:11.783 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:00:11.795 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:00:11.818 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:00:11.826 +08:00 [DBG] Created DbConnection. (8ms).
2025-04-25 20:00:11.830 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:00:11.831 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:00:11.834 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:00:11.840 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:00:11.844 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-04-25 20:00:11.847 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:00:11.855 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:00:11.861 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:00:11.863 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 20:00:11.864 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:00:11.865 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:00:11.875 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:00:11.878 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:00:11.881 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:00:11.882 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:00:11.884 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 20:00:11.890 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:00:11.893 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:00:11.899 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:00:11.901 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2025-04-25 20:00:11.909 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:00:11.910 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:00:11.912 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:00:11.913 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:00:11.914 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:00:11.916 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:00:11.918 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 20:00:11.922 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:00:11.924 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:00:11.927 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:00:11.932 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:00:11.935 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:00:11.945 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 18ms reading results.
2025-04-25 20:00:11.948 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:00:11.949 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:00:11.953 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 20:00:11.961 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 20:00:11.962 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 20:00:11.964 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 20:00:11.965 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 20:00:11.970 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 206.3251ms
2025-04-25 20:00:11.974 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:00:11.979 +08:00 [DBG] Connection id "0HNC3TR802FKE" completed keep alive response.
2025-04-25 20:00:11.983 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:00:11.984 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:00:11.993 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (8ms).
2025-04-25 20:00:11.995 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 663.6839ms
2025-04-25 20:00:44.031 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 20:00:44.042 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:00:44.043 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:00:44.044 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:00:44.046 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:00:44.055 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:00:44.059 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:00:44.060 +08:00 [DBG] Authorization was successful.
2025-04-25 20:00:44.061 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:00:44.062 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:00:44.063 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:00:44.064 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:00:44.065 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:00:44.083 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:00:44.092 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:00:44.094 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:00:44.095 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:00:44.099 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:00:44.105 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:00:44.110 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:00:44.112 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:00:44.113 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:00:44.114 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:00:44.119 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:00:44.124 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:00:44.125 +08:00 [DBG] Created DbConnection. (1ms).
2025-04-25 20:00:44.128 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:00:44.130 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:00:44.131 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:00:44.132 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:00:44.141 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-04-25 20:00:44.142 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:00:44.144 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:00:44.146 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:00:44.159 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 13ms reading results.
2025-04-25 20:00:44.161 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:00:44.162 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2025-04-25 20:00:44.164 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 20:00:44.171 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 20:00:44.174 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 80.1444ms
2025-04-25 20:00:44.181 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:00:44.192 +08:00 [DBG] Connection id "0HNC3TR802FKE" completed keep alive response.
2025-04-25 20:00:44.198 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:00:44.205 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:00:44.210 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (4ms).
2025-04-25 20:00:44.214 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 183.2694ms
2025-04-25 20:01:20.254 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 20:01:20.257 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:01:20.259 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:01:20.263 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:01:20.266 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:01:20.271 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:01:20.279 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:01:20.285 +08:00 [DBG] Authorization was successful.
2025-04-25 20:01:20.290 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:01:20.293 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:01:20.296 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:01:20.297 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:01:20.303 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:01:20.310 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:01:20.312 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:01:20.318 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:01:20.330 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:01:20.336 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:01:20.343 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:01:20.345 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:01:20.347 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:01:20.353 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:01:20.355 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:01:20.360 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:01:20.363 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:01:20.370 +08:00 [DBG] Created DbConnection. (7ms).
2025-04-25 20:01:20.374 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:01:20.377 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:01:20.378 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:01:20.379 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 20:01:20.381 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 20:01:20.385 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:01:20.391 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:01:20.393 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:01:20.394 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 20:01:20.395 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:01:20.405 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (10ms).
2025-04-25 20:01:20.409 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 20:01:20.410 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 20:01:20.411 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 93.0692ms
2025-04-25 20:01:20.414 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:01:20.422 +08:00 [DBG] Connection id "0HNC3TR802FKE" completed keep alive response.
2025-04-25 20:01:20.465 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:01:20.470 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:01:20.472 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 20:01:20.474 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 219.251ms
2025-04-25 20:01:29.984 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:01:30.026 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:01:30.039 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:01:30.113 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:01:30.141 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:01:30.143 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:01:30.146 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:01:30.181 +08:00 [DBG] Authorization was successful.
2025-04-25 20:01:30.193 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:01:30.200 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:01:30.212 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:01:30.260 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:01:30.263 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:01:30.283 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:01:30.294 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:01:30.305 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:01:30.323 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:01:30.330 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:01:30.344 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:01:30.354 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:01:30.358 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:01:30.360 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:01:30.361 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:01:30.369 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:01:30.375 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:01:30.378 +08:00 [DBG] Created DbConnection. (3ms).
2025-04-25 20:01:30.380 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:01:30.393 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:01:30.394 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:01:30.404 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2025-04-25 20:01:30.406 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-04-25 20:01:30.409 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:01:30.411 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:01:30.420 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:01:30.422 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 3ms reading results.
2025-04-25 20:01:30.424 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:01:30.425 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:01:30.428 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:01:30.430 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:01:30.440 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:01:30.441 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:01:30.453 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-04-25 20:01:30.455 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:01:30.457 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:01:30.462 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:01:30.463 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 20:01:30.470 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:01:30.472 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:01:30.474 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:01:30.475 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:01:30.476 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:01:30.479 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-25 20:01:30.480 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-25 20:01:30.486 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:01:30.490 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:01:30.493 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:01:30.494 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:01:30.495 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:01:30.499 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 6ms reading results.
2025-04-25 20:01:30.503 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:01:30.504 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:01:30.506 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 20:01:30.509 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 20:01:30.510 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 20:01:30.511 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 20:01:30.512 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 20:01:30.513 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 208.1578ms
2025-04-25 20:01:30.525 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:01:30.539 +08:00 [DBG] Connection id "0HNC3TR802FKE" completed keep alive response.
2025-04-25 20:01:30.541 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:01:30.542 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:01:30.545 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (3ms).
2025-04-25 20:01:30.554 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 570.5213ms
2025-04-25 20:02:05.653 +08:00 [DBG] Connection id "0HNC3TR802FKH" accepted.
2025-04-25 20:02:05.656 +08:00 [DBG] Connection id "0HNC3TR802FKH" started.
2025-04-25 20:02:05.678 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities?pageNumber=1&pageSize=10 - null null
2025-04-25 20:02:05.706 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:02:05.709 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 20:02:05.710 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 20:02:05.715 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 20:02:05.718 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 20:02:05.724 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 20:02:05.725 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 20:02:05.732 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 20:02:05.734 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 20:02:05.736 +08:00 [DBG] Connection id "0HNC3TR802FKH" completed keep alive response.
2025-04-25 20:02:05.744 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities?pageNumber=1&pageSize=10 - 401 0 null 62.5171ms
2025-04-25 20:02:08.016 +08:00 [DBG] Connection id "0HNC3TR802FKH" received FIN.
2025-04-25 20:02:08.035 +08:00 [DBG] Connection id "0HNC3TR802FKH" disconnecting.
2025-04-25 20:02:08.041 +08:00 [DBG] Connection id "0HNC3TR802FKH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:02:08.054 +08:00 [DBG] Connection id "0HNC3TR802FKH" stopped.
2025-04-25 20:02:12.855 +08:00 [DBG] Connection id "0HNC3TR802FKI" accepted.
2025-04-25 20:02:12.861 +08:00 [DBG] Connection id "0HNC3TR802FKI" started.
2025-04-25 20:02:12.864 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities?pageNumber=1&pageSize=10 - null null
2025-04-25 20:02:12.883 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:02:12.892 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 20:02:12.894 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 20:02:12.901 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 20:02:12.903 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 20:02:12.906 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 20:02:12.910 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 20:02:12.914 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 20:02:12.916 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 20:02:12.918 +08:00 [DBG] Connection id "0HNC3TR802FKI" completed keep alive response.
2025-04-25 20:02:12.923 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities?pageNumber=1&pageSize=10 - 401 0 null 59.0407ms
2025-04-25 20:02:18.019 +08:00 [DBG] Connection id "0HNC3TR802FKI" received FIN.
2025-04-25 20:02:18.023 +08:00 [DBG] Connection id "0HNC3TR802FKI" disconnecting.
2025-04-25 20:02:18.026 +08:00 [DBG] Connection id "0HNC3TR802FKI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:02:18.050 +08:00 [DBG] Connection id "0HNC3TR802FKI" stopped.
2025-04-25 20:02:42.914 +08:00 [DBG] Connection id "0HNC3TR802FKJ" accepted.
2025-04-25 20:02:42.920 +08:00 [DBG] Connection id "0HNC3TR802FKJ" started.
2025-04-25 20:02:42.940 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities?pageNumber=1&pageSize=10 - null null
2025-04-25 20:02:42.986 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:02:42.990 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2025-04-25 20:02:42.992 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2025-04-25 20:02:42.996 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 20:02:43.002 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:02:43.003 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:02:43.004 +08:00 [DBG] Authorization was successful.
2025-04-25 20:02:43.006 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 20:02:43.009 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2025-04-25 20:02:43.018 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:02:43.019 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:02:43.021 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:02:43.023 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:02:43.024 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-04-25 20:02:43.026 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 20:02:43.035 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2025-04-25 20:02:43.064 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2025-04-25 20:02:43.068 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2025-04-25 20:02:43.070 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2025-04-25 20:02:43.072 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 20:02:43.074 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2025-04-25 20:02:43.075 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2025-04-25 20:02:43.084 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2025-04-25 20:02:43.085 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2025-04-25 20:02:43.088 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2025-04-25 20:02:43.089 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2025-04-25 20:02:43.091 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 20:02:43.092 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2025-04-25 20:02:43.093 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2025-04-25 20:02:43.096 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2025-04-25 20:02:43.097 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 20:02:43.098 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2025-04-25 20:02:43.099 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 20:02:43.100 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 20:02:43.101 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2025-04-25 20:02:43.104 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2025-04-25 20:02:43.115 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 20:02:43.116 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2025-04-25 20:02:43.119 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 20:02:43.122 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2025-04-25 20:02:43.122 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2025-04-25 20:02:43.123 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2025-04-25 20:02:43.126 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:02:43.132 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:02:43.133 +08:00 [DBG] Created DbConnection. (1ms).
2025-04-25 20:02:43.134 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:02:43.135 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:02:43.136 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:02:43.136 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 20:02:43.139 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 20:02:43.141 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 20:02:43.148 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2025-04-25 20:02:43.152 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:02:43.153 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 20:02:43.155 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:02:43.156 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:02:43.171 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:02:43.172 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:02:43.173 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:02:43.174 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 20:02:43.175 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:02:43.176 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 20:02:43.185 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Id"
LIMIT @__p_1 OFFSET @__p_0
2025-04-25 20:02:43.190 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:02:43.192 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:02:43.199 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:02:43.200 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:02:43.202 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:02:43.203 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:02:43.206 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:02:43.208 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:02:43.209 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:02:43.215 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:02:43.218 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:02:43.220 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 29ms reading results.
2025-04-25 20:02:43.222 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:02:43.224 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 20:02:43.234 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 20:02:43.244 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2025-04-25 20:02:43.248 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 20:02:43.250 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 20:02:43.254 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 227.6472ms
2025-04-25 20:02:43.258 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2025-04-25 20:02:43.259 +08:00 [DBG] Connection id "0HNC3TR802FKJ" completed keep alive response.
2025-04-25 20:02:43.259 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:02:43.264 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:02:43.289 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (24ms).
2025-04-25 20:02:43.292 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities?pageNumber=1&pageSize=10 - 200 838 application/json; charset=utf-8 352.1587ms
2025-04-25 20:02:48.033 +08:00 [DBG] Connection id "0HNC3TR802FKJ" received FIN.
2025-04-25 20:02:48.048 +08:00 [DBG] Connection id "0HNC3TR802FKJ" disconnecting.
2025-04-25 20:02:48.051 +08:00 [DBG] Connection id "0HNC3TR802FKJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:02:48.062 +08:00 [DBG] Connection id "0HNC3TR802FKJ" stopped.
2025-04-25 20:02:58.078 +08:00 [DBG] Connection id "0HNC3TR802FKK" accepted.
2025-04-25 20:02:58.081 +08:00 [DBG] Connection id "0HNC3TR802FKK" started.
2025-04-25 20:02:58.085 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 20:02:58.091 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:02:58.096 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:02:58.101 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:02:58.104 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:02:58.106 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:02:58.115 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:02:58.116 +08:00 [DBG] Authorization was successful.
2025-04-25 20:02:58.118 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:02:58.119 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:02:58.120 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:02:58.121 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:02:58.123 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:02:58.125 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:02:58.134 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:02:58.137 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:02:58.138 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:02:58.140 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:02:58.143 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:02:58.146 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:02:58.154 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:02:58.155 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:02:58.157 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:02:58.169 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:02:58.180 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:02:58.182 +08:00 [DBG] Created DbConnection. (1ms).
2025-04-25 20:02:58.183 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:02:58.185 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:02:58.188 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:02:58.190 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:02:58.191 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 20:02:58.198 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:02:58.201 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:02:58.203 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:02:58.203 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 0ms reading results.
2025-04-25 20:02:58.206 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:02:58.208 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:02:58.213 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 20:02:58.214 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 20:02:58.215 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 78.2659ms
2025-04-25 20:02:58.216 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:02:58.217 +08:00 [DBG] Connection id "0HNC3TR802FKK" completed keep alive response.
2025-04-25 20:02:58.220 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:02:58.222 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:02:58.223 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:02:58.225 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 140.1133ms
2025-04-25 20:03:03.036 +08:00 [DBG] Connection id "0HNC3TR802FKK" received FIN.
2025-04-25 20:03:03.041 +08:00 [DBG] Connection id "0HNC3TR802FKK" disconnecting.
2025-04-25 20:03:03.048 +08:00 [DBG] Connection id "0HNC3TR802FKK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:03:03.061 +08:00 [DBG] Connection id "0HNC3TR802FKK" stopped.
2025-04-25 20:03:04.151 +08:00 [DBG] Connection id "0HNC3TR802FKL" accepted.
2025-04-25 20:03:04.155 +08:00 [DBG] Connection id "0HNC3TR802FKL" started.
2025-04-25 20:03:04.221 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:03:04.231 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:03:04.233 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:03:04.235 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:03:04.236 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:03:04.241 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:03:04.245 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:03:04.247 +08:00 [DBG] Authorization was successful.
2025-04-25 20:03:04.248 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:03:04.249 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:03:04.250 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:03:04.251 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:03:04.254 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:03:04.256 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:03:04.263 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:03:04.265 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:03:04.266 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:03:04.270 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:03:04.274 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:03:04.275 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:03:04.279 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:03:04.281 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:03:04.282 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:03:04.284 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:03:04.286 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:03:04.290 +08:00 [DBG] Created DbConnection. (3ms).
2025-04-25 20:03:04.300 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:03:04.304 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:03:04.306 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:03:04.316 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2025-04-25 20:03:04.320 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-04-25 20:03:04.322 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:03:04.325 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:03:04.332 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:03:04.335 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 3ms reading results.
2025-04-25 20:03:04.338 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:03:04.341 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 20:03:04.348 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:03:04.351 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:03:04.354 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:03:04.363 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2025-04-25 20:03:04.367 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-04-25 20:03:04.371 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:03:04.379 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:03:04.386 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:03:04.405 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 19ms reading results.
2025-04-25 20:03:04.464 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:03:04.482 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (18ms).
2025-04-25 20:03:04.513 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:03:04.521 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:03:04.553 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:03:04.584 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (30ms).
2025-04-25 20:03:04.586 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (32ms).
2025-04-25 20:03:04.600 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:03:04.618 +08:00 [INF] Executed DbCommand (18ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:03:04.673 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:03:04.676 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:03:04.683 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:03:04.705 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 32ms reading results.
2025-04-25 20:03:04.714 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:03:04.719 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (4ms).
2025-04-25 20:03:04.731 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 20:03:04.765 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/json"]'. The content types in the accept header must be a subset of the explicitly set content types.
2025-04-25 20:03:04.772 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 20:03:04.775 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 20:03:04.787 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 521.925ms
2025-04-25 20:03:04.831 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:03:05.134 +08:00 [DBG] Connection id "0HNC3TR802FKL" completed keep alive response.
2025-04-25 20:03:05.138 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:03:05.141 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:03:05.143 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:03:05.145 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 923.7306ms
2025-04-25 20:03:13.040 +08:00 [DBG] Connection id "0HNC3TR802FKL" received FIN.
2025-04-25 20:03:13.049 +08:00 [DBG] Connection id "0HNC3TR802FKL" disconnecting.
2025-04-25 20:03:13.051 +08:00 [DBG] Connection id "0HNC3TR802FKL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:03:13.064 +08:00 [DBG] Connection id "0HNC3TR802FKL" stopped.
2025-04-25 20:03:41.059 +08:00 [DBG] Connection id "0HNC3TR802FKE" disconnecting.
2025-04-25 20:03:41.062 +08:00 [DBG] Connection id "0HNC3TR802FKE" stopped.
2025-04-25 20:03:41.065 +08:00 [DBG] Connection id "0HNC3TR802FKE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:14:39.774 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 20:14:40.043 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 20:14:54.217 +08:00 [DBG] Connection id "0HNC3TR802FKM" accepted.
2025-04-25 20:14:54.218 +08:00 [DBG] Connection id "0HNC3TR802FKM" received FIN.
2025-04-25 20:14:54.228 +08:00 [DBG] Connection id "0HNC3TR802FKM" started.
2025-04-25 20:14:54.229 +08:00 [DBG] Connection id "0HNC3TR802FKN" accepted.
2025-04-25 20:14:54.232 +08:00 [DBG] Connection id "0HNC3TR802FKM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:14:54.234 +08:00 [DBG] Connection id "0HNC3TR802FKN" started.
2025-04-25 20:14:54.236 +08:00 [DBG] Connection id "0HNC3TR802FKM" disconnecting.
2025-04-25 20:14:54.239 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:14:54.242 +08:00 [DBG] Connection id "0HNC3TR802FKM" stopped.
2025-04-25 20:14:54.248 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 20:14:54.253 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:14:54.258 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:14:54.262 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:14:54.266 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:14:54.272 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 20:14:54.279 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 20:14:54.281 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 20:14:54.282 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 20:14:54.284 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 20:14:54.285 +08:00 [DBG] Connection id "0HNC3TR802FKN" completed keep alive response.
2025-04-25 20:14:54.291 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 401 0 null 51.2847ms
2025-04-25 20:15:01.286 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 20:15:01.292 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:15:01.294 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:15:01.295 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:15:01.297 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:15:01.299 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 20:15:01.327 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 20:15:01.333 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 20:15:01.334 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 20:15:01.335 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 20:15:01.338 +08:00 [DBG] Connection id "0HNC3TR802FKN" completed keep alive response.
2025-04-25 20:15:01.344 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 401 0 null 57.6377ms
2025-04-25 20:16:13.661 +08:00 [DBG] Connection id "0HNC3TR802FKO" received FIN.
2025-04-25 20:16:13.860 +08:00 [DBG] Connection id "0HNC3TR802FKO" accepted.
2025-04-25 20:16:13.906 +08:00 [DBG] Connection id "0HNC3TR802FKO" started.
2025-04-25 20:16:13.906 +08:00 [DBG] Connection id "0HNC3TR802FKP" accepted.
2025-04-25 20:16:13.910 +08:00 [DBG] Connection id "0HNC3TR802FKO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:16:13.911 +08:00 [DBG] Connection id "0HNC3TR802FKP" started.
2025-04-25 20:16:13.914 +08:00 [DBG] Connection id "0HNC3TR802FKO" disconnecting.
2025-04-25 20:16:13.922 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:16:13.924 +08:00 [DBG] Connection id "0HNC3TR802FKO" stopped.
2025-04-25 20:16:13.930 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:16:13.943 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:16:13.944 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:16:13.946 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:16:13.951 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 20:16:13.962 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 20:16:13.974 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 20:16:13.979 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 20:16:13.994 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 20:16:13.996 +08:00 [DBG] Connection id "0HNC3TR802FKP" completed keep alive response.
2025-04-25 20:16:14.062 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 401 0 null 140.0134ms
2025-04-25 20:16:44.020 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:16:44.024 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:16:44.027 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:16:44.029 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:16:44.032 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:16:44.043 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:16:44.045 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:16:44.050 +08:00 [DBG] Authorization was successful.
2025-04-25 20:16:44.055 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:16:44.062 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:16:44.077 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:16:44.079 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:16:44.087 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:16:44.093 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:16:44.095 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:16:44.107 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:16:44.124 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:16:44.127 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:16:44.137 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:16:44.144 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:16:44.145 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:16:44.151 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:16:44.155 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:16:44.178 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:16:44.188 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:16:44.202 +08:00 [DBG] Created DbConnection. (13ms).
2025-04-25 20:16:44.205 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:16:44.216 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:16:44.221 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:16:44.223 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-04-25 20:16:44.224 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-04-25 20:16:44.226 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:16:44.237 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:16:44.244 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:16:44.246 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 20:16:44.252 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:16:44.255 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (3ms).
2025-04-25 20:16:44.257 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:16:44.258 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:16:44.259 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:16:44.260 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 20:16:44.261 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:16:44.262 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:16:44.266 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:16:44.268 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:16:44.271 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2025-04-25 20:16:44.274 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:16:44.276 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:16:44.285 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:16:44.287 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:16:44.288 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:16:44.292 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-25 20:16:44.293 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-25 20:16:44.294 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:16:44.295 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:16:44.304 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:16:44.306 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:16:44.307 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:16:44.308 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 6ms reading results.
2025-04-25 20:16:44.310 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:16:44.310 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2025-04-25 20:16:44.320 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 20:16:44.343 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 20:16:44.345 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 20:16:44.346 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 20:16:44.354 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 20:16:44.364 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 257.2882ms
2025-04-25 20:16:44.369 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:16:44.377 +08:00 [DBG] Connection id "0HNC3TR802FKP" completed keep alive response.
2025-04-25 20:16:44.378 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:16:44.382 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:16:44.385 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (3ms).
2025-04-25 20:16:44.387 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 367.3986ms
2025-04-25 20:16:54.740 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 20:16:54.743 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:16:54.756 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:16:54.758 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:16:54.774 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:16:54.785 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:16:54.786 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:16:54.788 +08:00 [DBG] Authorization was successful.
2025-04-25 20:16:54.789 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:16:54.790 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:16:54.795 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:16:54.804 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:16:54.806 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:16:54.808 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:16:54.810 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:16:54.816 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:16:54.820 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:16:54.822 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:16:54.826 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:16:54.828 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:16:54.830 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:16:54.835 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:16:54.836 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:16:54.838 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:16:54.840 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:16:54.842 +08:00 [DBG] Created DbConnection. (2ms).
2025-04-25 20:16:54.844 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:16:54.847 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:16:54.853 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:16:54.855 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-04-25 20:16:54.857 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-25 20:16:54.858 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:16:54.860 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:16:54.866 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:16:54.868 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2025-04-25 20:16:54.870 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:16:54.874 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (4ms).
2025-04-25 20:16:54.876 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 20:16:54.877 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 20:16:54.878 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 62.8767ms
2025-04-25 20:16:54.880 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:16:54.885 +08:00 [DBG] Connection id "0HNC3TR802FKP" completed keep alive response.
2025-04-25 20:16:54.887 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:16:54.888 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:16:54.903 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (14ms).
2025-04-25 20:16:54.917 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 177.4607ms
2025-04-25 20:17:11.647 +08:00 [DBG] Connection id "0HNC3TR802FKN" disconnecting.
2025-04-25 20:17:11.649 +08:00 [DBG] Connection id "0HNC3TR802FKN" stopped.
2025-04-25 20:17:11.651 +08:00 [DBG] Connection id "0HNC3TR802FKN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:17:51.705 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:17:51.708 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:17:51.716 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:17:51.719 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:17:51.723 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:17:51.730 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:17:51.735 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:17:51.739 +08:00 [DBG] Authorization was successful.
2025-04-25 20:17:51.740 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:17:51.749 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:17:51.755 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:17:51.756 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:17:51.765 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:17:51.770 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:17:51.772 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:17:51.775 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:17:51.784 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:17:51.787 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:17:51.789 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:17:51.791 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:17:51.802 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:17:51.804 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:17:51.805 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:17:51.807 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:17:51.817 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:17:51.822 +08:00 [DBG] Created DbConnection. (4ms).
2025-04-25 20:17:51.823 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:17:51.826 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:17:51.834 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:17:51.835 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:17:51.837 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 20:17:51.838 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:17:51.853 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:17:51.858 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:17:51.859 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 20:17:51.868 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:17:51.870 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:17:51.874 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:17:51.886 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:17:51.887 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:17:51.888 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 20:17:51.889 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 20:17:51.892 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:17:51.896 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:17:51.900 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:17:51.901 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 20:17:51.903 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:17:51.904 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:17:51.906 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:17:51.907 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:17:51.908 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:17:51.915 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-04-25 20:17:51.918 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-04-25 20:17:51.919 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:17:51.923 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:17:51.924 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:17:51.935 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:17:51.937 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:17:51.939 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 14ms reading results.
2025-04-25 20:17:51.940 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:17:51.942 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:17:51.950 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 20:17:51.954 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 20:17:51.956 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 20:17:51.968 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 20:17:51.973 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 20:17:51.975 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 199.4182ms
2025-04-25 20:17:51.982 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:17:51.983 +08:00 [DBG] Connection id "0HNC3TR802FKP" completed keep alive response.
2025-04-25 20:17:51.985 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:17:51.986 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:17:51.990 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 20:17:52.045 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 339.36ms
2025-04-25 20:18:35.336 +08:00 [DBG] Connection id "0HNC3TR802FKQ" accepted.
2025-04-25 20:18:35.347 +08:00 [DBG] Connection id "0HNC3TR802FKQ" started.
2025-04-25 20:18:35.370 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:18:35.398 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:18:35.399 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:18:35.406 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:18:35.417 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:18:35.419 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 20:18:35.450 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 20:18:35.459 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 20:18:35.461 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 20:18:35.482 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 20:18:35.502 +08:00 [DBG] Connection id "0HNC3TR802FKQ" completed keep alive response.
2025-04-25 20:18:35.585 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 401 0 null 214.9432ms
2025-04-25 20:18:39.178 +08:00 [DBG] Connection id "0HNC3TR802FKQ" received FIN.
2025-04-25 20:18:39.180 +08:00 [DBG] Connection id "0HNC3TR802FKQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:18:39.185 +08:00 [DBG] Connection id "0HNC3TR802FKQ" disconnecting.
2025-04-25 20:18:39.189 +08:00 [DBG] Connection id "0HNC3TR802FKQ" stopped.
2025-04-25 20:18:57.541 +08:00 [DBG] Connection id "0HNC3TR802FKR" accepted.
2025-04-25 20:18:57.545 +08:00 [DBG] Connection id "0HNC3TR802FKR" started.
2025-04-25 20:18:57.605 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:18:57.622 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:18:57.624 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:18:57.626 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:18:57.633 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:18:57.635 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:18:57.637 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:18:57.638 +08:00 [DBG] Authorization was successful.
2025-04-25 20:18:57.643 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:18:57.647 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:18:57.648 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:18:57.649 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:18:57.651 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:18:57.654 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:18:57.658 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:18:57.665 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:18:57.667 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:18:57.670 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:18:57.672 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:18:57.677 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:18:57.681 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:18:57.683 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:18:57.685 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:18:57.688 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:18:57.697 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:18:57.698 +08:00 [DBG] Created DbConnection. (1ms).
2025-04-25 20:18:57.700 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:18:57.704 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:18:57.705 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:18:57.710 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-04-25 20:18:57.719 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-04-25 20:18:57.730 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:18:57.736 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:18:57.744 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:18:57.749 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 6ms reading results.
2025-04-25 20:18:57.754 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:18:57.759 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (4ms).
2025-04-25 20:18:57.764 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:18:57.766 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:18:57.767 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:18:57.768 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:18:57.771 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-25 20:18:57.775 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:18:57.778 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:18:57.780 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:18:57.782 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2025-04-25 20:18:57.784 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:18:57.786 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 20:18:57.788 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:18:57.794 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:18:57.797 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:18:57.798 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:18:57.800 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 20:18:57.810 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:18:57.814 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:18:57.819 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:18:57.821 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:18:57.828 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:18:57.829 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 11ms reading results.
2025-04-25 20:18:57.830 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:18:57.837 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (6ms).
2025-04-25 20:18:57.838 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 20:18:57.854 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/json"]'. The content types in the accept header must be a subset of the explicitly set content types.
2025-04-25 20:18:57.860 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 20:18:57.862 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 20:18:57.865 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 200.038ms
2025-04-25 20:18:57.876 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:18:57.878 +08:00 [DBG] Connection id "0HNC3TR802FKR" completed keep alive response.
2025-04-25 20:18:57.880 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:18:57.888 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:18:57.894 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (6ms).
2025-04-25 20:18:57.898 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 293.3047ms
2025-04-25 20:18:59.183 +08:00 [DBG] Connection id "0HNC3TR802FKR" received FIN.
2025-04-25 20:18:59.188 +08:00 [DBG] Connection id "0HNC3TR802FKR" disconnecting.
2025-04-25 20:18:59.190 +08:00 [DBG] Connection id "0HNC3TR802FKR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:18:59.210 +08:00 [DBG] Connection id "0HNC3TR802FKR" stopped.
2025-04-25 20:19:06.902 +08:00 [DBG] Connection id "0HNC3TR802FKS" accepted.
2025-04-25 20:19:06.904 +08:00 [DBG] Connection id "0HNC3TR802FKS" started.
2025-04-25 20:19:06.906 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/4/pointsofinterest - null null
2025-04-25 20:19:06.910 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:19:06.945 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/4/pointsofinterest'
2025-04-25 20:19:06.950 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/4/pointsofinterest'
2025-04-25 20:19:06.959 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:19:06.963 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:19:06.966 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:19:06.967 +08:00 [DBG] Authorization was successful.
2025-04-25 20:19:06.968 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:19:06.970 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:19:06.979 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:19:06.980 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:19:06.982 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:19:06.984 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:19:06.985 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:19:06.987 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:19:06.995 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:19:06.997 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:19:06.999 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:19:07.000 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:19:07.004 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:19:07.005 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:19:07.009 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:19:07.013 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:19:07.015 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:19:07.016 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 20:19:07.017 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:19:07.018 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:19:07.019 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:19:07.020 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-25 20:19:07.026 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-04-25 20:19:07.029 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:19:07.031 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:19:07.034 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:19:07.036 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 20:19:07.038 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:19:07.044 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (6ms).
2025-04-25 20:19:07.045 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 20:19:07.046 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 20:19:07.047 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 60.7109ms
2025-04-25 20:19:07.048 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:19:07.049 +08:00 [DBG] Connection id "0HNC3TR802FKS" completed keep alive response.
2025-04-25 20:19:07.060 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:19:07.067 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:19:07.070 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 20:19:07.086 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/4/pointsofinterest - 403 0 null 180.2749ms
2025-04-25 20:19:09.185 +08:00 [DBG] Connection id "0HNC3TR802FKS" received FIN.
2025-04-25 20:19:09.198 +08:00 [DBG] Connection id "0HNC3TR802FKS" disconnecting.
2025-04-25 20:19:09.213 +08:00 [DBG] Connection id "0HNC3TR802FKS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:19:09.215 +08:00 [DBG] Connection id "0HNC3TR802FKS" stopped.
2025-04-25 20:20:03.111 +08:00 [DBG] Connection id "0HNC3TR802FKP" disconnecting.
2025-04-25 20:20:03.116 +08:00 [DBG] Connection id "0HNC3TR802FKP" stopped.
2025-04-25 20:20:03.118 +08:00 [DBG] Connection id "0HNC3TR802FKP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:33:45.884 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 20:34:25.101 +08:00 [DBG] Connection id "0HNC3TR802FKT" received FIN.
2025-04-25 20:34:25.110 +08:00 [DBG] Connection id "0HNC3TR802FKT" accepted.
2025-04-25 20:34:25.112 +08:00 [DBG] Connection id "0HNC3TR802FKT" started.
2025-04-25 20:34:25.116 +08:00 [DBG] Connection id "0HNC3TR802FKU" accepted.
2025-04-25 20:34:25.119 +08:00 [DBG] Connection id "0HNC3TR802FKU" started.
2025-04-25 20:34:25.127 +08:00 [DBG] Connection id "0HNC3TR802FKT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:34:25.130 +08:00 [DBG] Connection id "0HNC3TR802FKT" disconnecting.
2025-04-25 20:34:25.133 +08:00 [DBG] Connection id "0HNC3TR802FKT" stopped.
2025-04-25 20:34:25.135 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 20:34:25.153 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 20:34:25.165 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:34:25.169 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:34:25.175 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:34:25.181 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:34:25.200 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 20:34:25.214 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 20:34:25.218 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 20:34:25.224 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 20:34:25.230 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 20:34:25.231 +08:00 [DBG] Connection id "0HNC3TR802FKU" completed keep alive response.
2025-04-25 20:34:25.233 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 401 0 null 99.193ms
2025-04-25 20:34:36.575 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:34:36.576 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:34:36.578 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:34:36.579 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:34:36.582 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:34:36.585 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 20:34:36.594 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 20:34:36.600 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 20:34:36.602 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 20:34:36.606 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 20:34:36.607 +08:00 [DBG] Connection id "0HNC3TR802FKU" completed keep alive response.
2025-04-25 20:34:36.608 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 401 0 null 33.4681ms
2025-04-25 20:35:01.722 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 20:35:01.985 +08:00 [DBG] Config reload token fired. Checking for changes...
2025-04-25 20:35:26.066 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:35:26.075 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-25 20:35:26.079 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:35:26.080 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:35:26.082 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:35:26.090 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:35:26.096 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenException: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.DecryptToken(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWEAsync(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 20:35:26.108 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
2025-04-25 20:35:26.109 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 20:35:26.110 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 20:35:26.111 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 20:35:26.114 +08:00 [DBG] Connection id "0HNC3TR802FKU" completed keep alive response.
2025-04-25 20:35:26.115 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 401 0 null 48.2198ms
2025-04-25 20:35:38.456 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:35:38.463 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:35:38.464 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:35:38.465 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:35:38.468 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:35:38.481 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:35:38.482 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:35:38.487 +08:00 [DBG] Authorization was successful.
2025-04-25 20:35:38.498 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:35:38.512 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:35:38.516 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:35:38.523 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:35:38.527 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:35:38.528 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:35:38.531 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:35:38.534 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:35:38.550 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:35:38.554 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:35:38.556 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:35:38.560 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:35:38.560 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:35:38.561 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:35:38.563 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:35:38.585 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:35:38.592 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:35:38.598 +08:00 [DBG] Created DbConnection. (5ms).
2025-04-25 20:35:38.599 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:35:38.619 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:35:38.623 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:35:38.624 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-25 20:35:38.625 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-04-25 20:35:38.629 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:35:38.643 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:35:38.646 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:35:38.648 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2025-04-25 20:35:38.649 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:35:38.652 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 20:35:38.658 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:35:38.659 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:35:38.660 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:35:38.661 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:35:38.663 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 20:35:38.664 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:35:38.666 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:35:38.670 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:35:38.672 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 20:35:38.674 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:35:38.676 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:35:38.679 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:35:38.681 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:35:38.685 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:35:38.686 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:35:38.687 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 20:35:38.688 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:35:38.690 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:35:38.704 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:35:38.708 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:35:38.710 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:35:38.711 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 19ms reading results.
2025-04-25 20:35:38.713 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:35:38.714 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:35:38.720 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 20:35:38.724 +08:00 [DBG] No information found on request to perform content negotiation.
2025-04-25 20:35:38.725 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-04-25 20:35:38.727 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 20:35:38.730 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 20:35:38.743 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 210.7298ms
2025-04-25 20:35:38.753 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:35:38.769 +08:00 [DBG] Connection id "0HNC3TR802FKU" completed keep alive response.
2025-04-25 20:35:38.773 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:35:38.775 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:35:38.776 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:35:38.780 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 323.9629ms
2025-04-25 20:35:56.653 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - null null
2025-04-25 20:35:56.657 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:35:56.660 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:35:56.663 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2025-04-25 20:35:56.664 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:35:56.669 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:35:56.674 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:35:56.676 +08:00 [DBG] Authorization was successful.
2025-04-25 20:35:56.678 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:35:56.680 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:35:56.684 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:35:56.687 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:35:56.688 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:35:56.690 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:35:56.692 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:35:56.693 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:35:56.698 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:35:56.701 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:35:56.705 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:35:56.707 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:35:56.710 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:35:56.713 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:35:56.715 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:35:56.721 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:35:56.724 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:35:56.725 +08:00 [DBG] Created DbConnection. (0ms).
2025-04-25 20:35:56.726 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:35:56.727 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:35:56.728 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:35:56.730 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:35:56.730 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-25 20:35:56.731 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:35:56.735 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:35:56.738 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:35:56.739 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 20:35:56.743 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:35:56.746 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (3ms).
2025-04-25 20:35:56.751 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 20:35:56.753 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 20:35:56.754 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 61.385ms
2025-04-25 20:35:56.755 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:35:56.756 +08:00 [DBG] Connection id "0HNC3TR802FKU" completed keep alive response.
2025-04-25 20:35:56.758 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:35:56.759 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:35:56.762 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (3ms).
2025-04-25 20:35:56.764 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/1/pointsofinterest - 403 0 null 111.2143ms
2025-04-25 20:37:17.204 +08:00 [DBG] Connection id "0HNC3TR802FKV" accepted.
2025-04-25 20:37:17.208 +08:00 [DBG] Connection id "0HNC3TR802FKV" started.
2025-04-25 20:37:17.215 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:37:17.219 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:37:17.221 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:37:17.222 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:37:17.231 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:37:17.236 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-25 20:37:17.254 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'wcFloOl6EEXurVgly9goq2m9flV4ywBtIgLtHoGt1Po'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-04-25 20:37:17.255 +08:00 [DBG] Policy authentication schemes  did not succeed
2025-04-25 20:37:17.257 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2025-04-25 20:37:17.273 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-25 20:37:17.285 +08:00 [DBG] Connection id "0HNC3TR802FKV" completed keep alive response.
2025-04-25 20:37:17.301 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 401 0 null 86.1727ms
2025-04-25 20:37:20.866 +08:00 [DBG] Connection id "0HNC3TR802FKV" received FIN.
2025-04-25 20:37:20.868 +08:00 [DBG] Connection id "0HNC3TR802FKV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:37:20.870 +08:00 [DBG] Connection id "0HNC3TR802FKV" disconnecting.
2025-04-25 20:37:20.873 +08:00 [DBG] Connection id "0HNC3TR802FKV" stopped.
2025-04-25 20:37:36.131 +08:00 [DBG] Connection id "0HNC3TR802FL0" accepted.
2025-04-25 20:37:36.173 +08:00 [DBG] Connection id "0HNC3TR802FL0" started.
2025-04-25 20:37:36.205 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - null null
2025-04-25 20:37:36.232 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:37:36.237 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:37:36.242 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2025-04-25 20:37:36.249 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:37:36.251 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:37:36.252 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:37:36.254 +08:00 [DBG] Authorization was successful.
2025-04-25 20:37:36.260 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:37:36.267 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:37:36.270 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:37:36.273 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:37:36.276 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:37:36.283 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:37:36.285 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:37:36.288 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:37:36.291 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:37:36.298 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:37:36.301 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:37:36.305 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:37:36.308 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:37:36.313 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:37:36.315 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:37:36.323 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:37:36.326 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:37:36.333 +08:00 [DBG] Created DbConnection. (6ms).
2025-04-25 20:37:36.337 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:37:36.351 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:37:36.355 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:37:36.357 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:37:36.375 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2025-04-25 20:37:36.383 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:37:36.387 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:37:36.391 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:37:36.393 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 20:37:36.404 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:37:36.407 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 20:37:36.414 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:37:36.417 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:37:36.420 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:37:36.423 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-04-25 20:37:36.425 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-04-25 20:37:36.431 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:37:36.435 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2025-04-25 20:37:36.439 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:37:36.442 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 3ms reading results.
2025-04-25 20:37:36.469 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:37:36.471 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2025-04-25 20:37:36.485 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:37:36.488 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:37:36.500 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:37:36.502 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-25 20:37:36.504 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-25 20:37:36.507 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:37:36.513 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2025-04-25 20:37:36.517 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:37:36.520 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-25 20:37:36.522 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:37:36.524 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 7ms reading results.
2025-04-25 20:37:36.525 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:37:36.530 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (4ms).
2025-04-25 20:37:36.532 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2025-04-25 20:37:36.534 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/json"]'. The content types in the accept header must be a subset of the explicitly set content types.
2025-04-25 20:37:36.536 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2025-04-25 20:37:36.539 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-25 20:37:36.541 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 252.7382ms
2025-04-25 20:37:36.546 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:37:36.549 +08:00 [DBG] Connection id "0HNC3TR802FL0" completed keep alive response.
2025-04-25 20:37:36.550 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:37:36.551 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:37:36.553 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2025-04-25 20:37:36.557 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/2/pointsofinterest - 200 246 application/json; charset=utf-8 352.2592ms
2025-04-25 20:37:40.888 +08:00 [DBG] Connection id "0HNC3TR802FL0" received FIN.
2025-04-25 20:37:40.892 +08:00 [DBG] Connection id "0HNC3TR802FL0" disconnecting.
2025-04-25 20:37:40.895 +08:00 [DBG] Connection id "0HNC3TR802FL0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:37:40.905 +08:00 [DBG] Connection id "0HNC3TR802FL0" stopped.
2025-04-25 20:37:45.056 +08:00 [DBG] Connection id "0HNC3TR802FL1" accepted.
2025-04-25 20:37:45.064 +08:00 [DBG] Connection id "0HNC3TR802FL1" started.
2025-04-25 20:37:45.067 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5212/api/cities/3/pointsofinterest - null null
2025-04-25 20:37:45.074 +08:00 [DBG] The request path  does not match the path filter
2025-04-25 20:37:45.086 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2025-04-25 20:37:45.088 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2025-04-25 20:37:45.091 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:37:45.092 +08:00 [DBG] Successfully validated the token.
2025-04-25 20:37:45.096 +08:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-25 20:37:45.100 +08:00 [DBG] Authorization was successful.
2025-04-25 20:37:45.101 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:37:45.103 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2025-04-25 20:37:45.105 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-25 20:37:45.106 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-25 20:37:45.109 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-04-25 20:37:45.115 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-25 20:37:45.117 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-04-25 20:37:45.118 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:37:45.121 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2025-04-25 20:37:45.122 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:37:45.125 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2025-04-25 20:37:45.129 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:37:45.131 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:37:45.133 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2025-04-25 20:37:45.136 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2025-04-25 20:37:45.141 +08:00 [DBG] Entity Framework Core 9.0.4 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.4' with options: None
2025-04-25 20:37:45.148 +08:00 [DBG] Creating DbConnection.
2025-04-25 20:37:45.149 +08:00 [DBG] Created DbConnection. (1ms).
2025-04-25 20:37:45.151 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:37:45.152 +08:00 [DBG] Opened connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:37:45.154 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-25 20:37:45.157 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-04-25 20:37:45.164 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-04-25 20:37:45.166 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:37:45.168 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2025-04-25 20:37:45.171 +08:00 [DBG] Closing data reader to 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:37:45.173 +08:00 [DBG] A data reader for 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2025-04-25 20:37:45.175 +08:00 [DBG] Closing connection to database 'main' on server 'C:\Users\aisur\OneDrive\Desktop\ASP.NET\CityInfo\CityInfo.API\CityInfo.db'.
2025-04-25 20:37:45.181 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (6ms).
2025-04-25 20:37:45.183 +08:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-04-25 20:37:45.185 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-04-25 20:37:45.186 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 67.567ms
2025-04-25 20:37:45.188 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2025-04-25 20:37:45.190 +08:00 [DBG] Connection id "0HNC3TR802FL1" completed keep alive response.
2025-04-25 20:37:45.192 +08:00 [DBG] 'CityInfoContext' disposed.
2025-04-25 20:37:45.196 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2025-04-25 20:37:45.204 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (7ms).
2025-04-25 20:37:45.206 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5212/api/cities/3/pointsofinterest - 403 0 null 138.359ms
2025-04-25 20:37:50.931 +08:00 [DBG] Connection id "0HNC3TR802FL1" received FIN.
2025-04-25 20:37:50.956 +08:00 [DBG] Connection id "0HNC3TR802FL1" disconnecting.
2025-04-25 20:37:51.035 +08:00 [DBG] Connection id "0HNC3TR802FL1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-25 20:37:51.121 +08:00 [DBG] Connection id "0HNC3TR802FL1" stopped.
2025-04-25 20:38:08.041 +08:00 [DBG] Connection id "0HNC3TR802FKU" disconnecting.
2025-04-25 20:38:08.043 +08:00 [DBG] Connection id "0HNC3TR802FKU" stopped.
2025-04-25 20:38:08.045 +08:00 [DBG] Connection id "0HNC3TR802FKU" sending FIN because: "The Socket transport's send loop completed gracefully."
